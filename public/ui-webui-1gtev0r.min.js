/*
Component: j-Approve
Version: 1
Updated: 2024-07-02T16:30:01.000Z
Author: Peter Širka


Component: j-DatePicker
Version: 1
Updated: 2024-10-30T09:33:00.000Z
Author: Peter Širka


Component: j-Directory
Version: 1
Updated: 2024-05-02T15:35:03.000Z
Author: Peter Širka


Component: j-ErrorHandler
Version: 1
Updated: 2023-01-25T13:13:01.000Z
Author: Peter Širka


Component: j-Exec
Version: 1
Updated: 2024-06-19T08:14:00.000Z
Author: Peter Širka


Component: j-Icons
Version: 1
Updated: 2024-10-19T00:46:00.000Z
Author: Peter Širka


Component: j-ImageViewer
Version: 1
Updated: 2024-01-14T23:28:01.000Z
Author: Peter Širka


Component: j-Input
Version: 1
Updated: 2024-11-01T20:13:00.000Z
Author: Peter Širka


Component: j-Locale
Version: 1
Updated: 2024-06-10T13:43:00.000Z
Author: Peter Širka


Component: j-Menu
Version: 1
Updated: 2024-07-22T15:23:00.000Z
Author: Peter Širka


Component: j-Message
Version: 1
Updated: 2024-01-30T11:46:02.000Z
Author: Peter Širka


Component: j-MobileCarousel
Version: 1
Updated: 2023-01-31T15:57:06.000Z
Author: Peter Širka


Component: j-UIBuilder
Version: 1
Updated: 2023-11-13T15:42:02.000Z
Author: Peter Širka


Component: j-UIStudio
Version: 1
Updated: 2024-01-16T23:26:03.000Z
Author: Peter Širka
*/

CSS(`.ui-approve-noscroll,.ui-approve-noscroll body{overflow:hidden}.ui-approve{background-color:rgba(255,255,255,0.9);position:fixed;left:0;right:0;bottom:0;top:0;z-index:100;width:100%;display:table;height:100%;transition:0.5s all;opacity:0}.ui-approve > div{display:table-cell;vertical-align:middle;text-align:center;color:#FFF;padding:15px}.ui-approve-body{color:#000;padding:0;position:relative;display:inline-block;max-width:300px;text-align:left;transform:scale(0.8);transition:0.15s all;border:0;background-color:#FFF;box-shadow:0 0 30px rgba(0,0,0,0.1)}.ui-approve-content{padding:50px 30px;text-align:center}.ui-approve-content > i{font-size:50px;display:block;margin-bottom:10px}.ui-approve-buttons{height:40px}.ui-approve button{font-size:12px;float:left;cursor:pointer;outline:0;background-color:#E0E0E0;border:0;border-radius:0;color:gray;padding:0;width:50%;height:40px;font-weight:normal;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ui-approve button i{margin-right:5px}.ui-approve button:hover{opacity:0.9}.ui-approve button[data-index='0']{color:#FFF;font-weight:bold;font-weight:bold;background-color:#EC2C28}.ui-approve-close{position:absolute;color:#C0C0C0;font-size:11px;right:8px;top:5px;cursor:pointer}.ui-approve-close:hover{color:#A0A0A0}.ui-approve-visible{opacity:1}.ui-approve-visible .ui-approve-body{-webkit-transform:scale(1);transform:scale(1)}.ui-approve-click{transform:scale(1.07) !important}.ui-approve-style-2{background-color:rgba(0,0,0,0.7)}.ui-approve-style-2 .ui-approve-body{max-width:500px;border-radius:var(--radius)}.ui-approve-style-2 .ui-approve-content{padding:28px 24px 24px;text-align:left;font-size:15px;color:#797982;line-height:1.25rem}.ui-approve-style-2 .ui-approve-content > i{margin-left:38px;margin-bottom:12px}.ui-approve-style-2 .ui-approve-buttons{display:flex;align-items:center;justify-content:end;height:auto;padding:0 24px 24px}.ui-approve-style-2 button{min-width:92px;width:auto;border-radius:var(--radius);border:1px solid #e4e4e7;height:40px;line-height:40px;font-size:14px}.ui-approve-style-2 button[data-index='0']{order:2;margin-left:12px;background-color:#18181b;border-color:#18181b;transition:opacity .2s}.ui-approve-style-2 button[data-index='1']{color:color:#797982;background-color:#fff;transition:background-color .2s}.ui-approve-style-2 .ui-approve-close{display:none}.ui-approve-style-2 button[data-index='0']:hover{opacity:.9}.ui-approve-style-2 button[data-index='1']:hover{background-color:#f0f0f0}@media(max-width:340px){.ui-approve button{display:block;margin:8px 0 0;display:block;width:100%;height:34px;font-size:13px}}.ui-dark .ui-approve{background-color:rgba(0,0,0,0.9)}.ui-dark .ui-approve-body{background-color:#202020}.ui-dark .ui-approve-content{border-bottom-color:#303030;color:#FFF}.ui-dark .ui-approve button{background-color:#505050;color:#C0C0C0}.ui-dark .ui-approve-close{color:#505050}.ui-dark .ui-approve-close:hover{color:#888}.ui-dark .ui-approve button[data-index='0']{background-color:#EC2C28;color:#fff}.ui-dark .ui-approve-style-2.ui-approve{background-color:rgba(0,0,0,0.7)}.ui-dark .ui-approve-style-2 .ui-approve-body{background-color:#09090b;border:1px solid #27272a}.ui-dark .ui-approve-style-2.ui-approve .ui-approve-content{color:#8f8f97}.ui-dark .ui-approve-style-2.ui-approve button[data-index='0']{color:#09090b;background-color:#fff}.ui-dark .ui-approve-style-2.ui-approve button[data-index='1']{color:#797982;background-color:#09090b;border-color:#27272a}.ui-dark .ui-approve-style-2.ui-approve button[data-index='1']:hover{background-color:#303030}

.ui-datepicker-container{position:absolute;left:0;right:0;bottom:0;top:0;z-index:99}.ui-datepicker{font-size:12px;width:247px;height:300px;position:absolute;background-color:#FFF;border:1px solid #E0E0E0;left:100px;top:100px;border-radius:var(--radius);z-index:100;color:gray;box-shadow:0 5px 25px rgba(0,0,0,0.1);opacity:0;transform:scale(0.6);transition:all 0.2s}.ui-datepicker-visible{transform:scale(1);opacity:1}.ui-datepicker-disabled{color:silver !important;cursor:pointer}.ui-datepicker-body,.ui-datepicker-months,.ui-datepicker-years{height:235px}.ui-datepicker-footer{height:28px;border-top:1px solid #E0E0E0;font-size:11px;padding:0 8px;line-height:26px;background-color:#F8F8F8;display:flex;justify-content:space-between}.ui-datepicker-footer > span:hover{text-decoration:underline}.ui-datepicker-now,.ui-datepicker-clear{color:#000;cursor:pointer}.ui-datepicker-day-today div{background-color:#F0F0F0;font-weight:bold}.ui-datepicker-selected div{background-color:var(--color);font-weight:bold;color:#FFF}.ui-datepicker-date i{position:absolute;left:12px;top:25px;font-size:12px;color:red}.ui-datepicker-months > div{width:61px;height:78px;line-height:76px;position:relative;display:inline-block;text-align:center;cursor:pointer;text-transform:uppercase;font-weight:bold}.ui-datepicker-months > div > div{width:50px;height:50px;line-height:46px;position:relative;display:inline-block;border-radius:100%;border:2px solid transparent}.ui-datepicker-months > div:hover > div{border-color:#E0E0E0;color:#000}.ui-datepicker-years{padding:5px 0 0}.ui-datepicker-years > div{width:49px;height:46px;line-height:44px;position:relative;display:inline-block;text-align:center;cursor:pointer}.ui-datepicker-years > div > div{width:40px;height:40px;line-height:36px;position:relative;display:inline-block;border-radius:100%;border:2px solid transparent}.ui-datepicker-years > div:hover > div{border-color:#E0E0E0;color:#000}.ui-datepicker-header{height:35px;border-bottom:1px solid #E0E0E0;text-align:center;font-size:14px}.ui-datepicker-prev{float:left;line-height:34px;width:34px;color:#000;cursor:pointer}.ui-datepicker-next{float:right;line-height:34px;width:34px;color:#000;cursor:pointer}.ui-datepicker-prev:hover,.ui-datepicker-next:hover{background-color:#F0F0F0}.ui-datepicker-info{margin:0 34px;line-height:34px}.ui-datepicker-info > span{cursor:pointer}.ui-datepicker-info > span:hover{color:#000}.ui-datepicker-info .ui-datepicker-year{margin-left:5px}.ui-datepicker-week > div,.ui-datepicker-days > div{width:35px;height:35px;line-height:35px;position:relative;display:inline-block;vertical-align:middle;text-align:center}.ui-datepicker-week > div{height:25px;line-height:25px;font-weight:bold;color:#000;border-bottom:1px solid #E0E0E0}.ui-datepicker-days > div{font-size:11px;cursor:pointer}.ui-datepicker-date:hover > div{border-color:#E0E0E0;color:#000}.ui-datepicker-selected:hover > div{border-color:var(--color);color:#FFF}.ui-datepicker-days > div > div{width:28px;height:28px;line-height:24px;border-radius:100%;margin:0 auto;position:relative;display:inline-block;border:2px solid transparent}.ui-dark .ui-datepicker{background-color:#282828;border-color:#404040;color:gray}.ui-dark .ui-datepicker-disabled{color:#505050 !important}.ui-dark .ui-datepicker-footer{border-top-color:#404040;background-color:#303030}.ui-dark .ui-datepicker-now,.ui-dark .ui-datepicker-clear{color:#FFF}.ui-dark .ui-datepicker-day-today div{background-color:#353535}.ui-dark .ui-datepicker-selected div{background-color:var(--color);color:#FFF}.ui-dark .ui-datepicker-date i{color:red}.ui-dark .ui-datepicker-months > div:hover > div{border-color:#505050;color:#FFF}.ui-dark .ui-datepicker-years > div:hover > div{border-color:#505050;color:#FFF}.ui-dark .ui-datepicker-header{border-bottom-color:#404040}.ui-dark .ui-datepicker-prev{color:#FFF}.ui-dark .ui-datepicker-next{color:#FFF}.ui-dark .ui-datepicker-prev:hover,.ui-dark .ui-datepicker-next:hover{background-color:#303030}.ui-dark .ui-datepicker-info > span:hover{color:#FFF}.ui-dark .ui-datepicker-week > div{color:#FFF;border-bottom-color:#404040}.ui-dark .ui-datepicker-date:hover > div{border-color:#505050;color:#FFF}.ui-dark .ui-datepicker-selected:hover > div{border-color:var(--color);color:#FFF}

.ui-directory-area{position:absolute;left:0;top:0;right:0;bottom:0;z-index:99}.ui-directory{position:absolute;opacity:0;transition:0.25s transform cubic-bezier(0.23,1,0.32,1);left:-100;top:-100;z-index:100;box-shadow:0 1px 20px rgba(0,0,0,0.1);background-color:#FFF;border-radius:var(--radius);border:1px solid #E0E0E0;overflow:hidden;transition:all 0.2s}.ui-directory-search{height:42px;background:#FFF;border-radius:var(--radius) var(--radius) 0 0;border-bottom:1px solid #E0E0E0;line-height:26px}.ui-directory-search input{width:100%;background-color:#FFF;border:0;font-size:14px;outline:0;padding:0;margin:0;line-height:28px;outline:0}.ui-directory-search > div{margin:0 22px 0 35px;padding:6px 10px 0 0;line-height:24px}.ui-directory-search > span{float:left;width:16px;text-align:center;padding:7px 0 0 12px;font-size:14px}.ui-directory-add{float:right !important;padding-left:0 !important;color:#83c83c;text-align:left !important;font-size:14px !important;cursor:pointer;width:24px !important;font-weight:bold;padding-top:8px}.ui-directory .ui-disabled{color:#A0A0A0 !important;cursor:not-allowed}.ui-directory-search .ti-times{color:red;cursor:pointer}.ui-directory-visible{opacity:1}.ui-directory-container{height:180px;overflow-x:hidden;overflow-y:auto;overflow-scrolling:touch;margin:0 30px 0 0;padding:0}.ui-directory ul{list-style-type:none;margin:0;padding:0}.ui-directory .selected{background-color:#F8F8F8;color:#000}.ui-directory .current{background-color:#F2F2F2;color:#000}.ui-directory-default li{padding:0 40px 0 10px;height:32px;line-height:32px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ui-directory li{border-bottom:1px solid #F0F0F0;font-size:14px;background-color:#FFF;cursor:pointer;margin:0}.ui-directory-checkbox{width:16px;height:16px;float:left;border:1px solid #D0D0D0;border-radius:var(--radius);font-size:10px;line-height:16px;margin:8px 6px 0 0;text-align:center;background-color:#FFF}.ui-directory-checkbox i{visibility:hidden}.ui-directory .selected .ui-directory-checkbox{background-color:#4285F4;border-color:#4285F4;color:#FFF}.ui-directory .selected .ui-directory-checkbox i{visibility:visible}.ui-directory li:last-child{border-bottom:0}.ui-directory-search-hidden .ui-directory-search{height:0;overflow:hidden;opacity:0}.ui-dark .ui-directory .ui-disabled{color:#666 !important}.ui-dark .ui-directory{background-color:#303030;border-color:#404040;box-shadow:1px 5px 10px rgba(0,0,0,0.2)}.ui-dark .ui-directory-search{background:#303030}.ui-dark .ui-directory li{background-color:#303030;border-color:#404040}.ui-dark .ui-directory-search{border-bottom-color:#404040}.ui-dark .ui-directory-search input{background-color:#303030}.ui-dark .ui-directory-add:hover{color:#FFF}.ui-dark .ui-directory-checkbox{border-color:#484848;background-color:#404040}.ui-dark .ui-directory .selected{background-color:#2D2D2D;color:#FFF}.ui-dark .ui-directory .current{background-color:#373737;color:#FFF}

.exec{cursor:pointer}

.ui-icons-area{position:absolute;left:0;right:0;bottom:0;top:0;z-index:100}.ui-icons-container{position:absolute;z-index:1;border:1px solid #E0E0E0;font-size:14px;color:#000;width:330px;background-color:#FFF;box-shadow:0 5px 10px rgba(0,0,0,0.08);border-radius:var(--radius);overflow:hidden}.ui-icons-header{height:50px;background-color:#fcfcfc;border-bottom:1px solid #e0e0e0;padding:10px 0 0}.ui-icons-nav{padding:13px 5px 6px;text-align:center}.ui-icons-nav span{cursor:pointer;font-size:24px;width:11%;display:inline-block;user-select:none}.ui-icons-search{padding:0 10px}.ui-icons-search span{float:left;width:30px;text-align:center;height:30px;padding:7px 0 0;font-size:12px;background-color:#FFF;border:1px solid #e0e0e0;border-radius:var(--radius) 0 0 var(--radius);color:#A0A0A0;cursor:pointer}.ui-icons-search .ti-times{color:#ff0000}.ui-icons-search div{margin-left:30px}.ui-icons-search-input{margin:0;width:100%;border:1px solid #e0e0e0;padding:0 9px;height:30px;border-radius:0 var(--radius) var(--radius) 0;border-left:0;appearance:none}.ui-icons-search-input:focus{outline:none}.ui-icons-scroll{overflow:auto;height:305px}.ui-icons-content{position:relative;padding:5px}.ui-icons-content span{padding:5px;cursor:pointer;font-size:20px;width:12.5%;height:30px;display:inline-block;text-align:center;user-select:none;color:#404040}.ui-icons-content span:hover{transform:scale(1.15);color:#000}.ui-icons-scrollbar{height:305px}.ui-dark .ui-icons-container{background-color:#202020;border-color:#303030}.ui-dark .ui-icons-header{background-color:#202020;border-color:#303030}.ui-dark .ui-icons-content{color:#A0A0A0}.ui-dark .ui-icons-search span{background-color:#252525;border-color:#303030;color:#A0A0A0}.ui-dark .ui-icons-search-input{border-color:#303030;background-color:#1f1f1f;color:#FFF}.ui-dark .ui-icons-content span{color:#A0A0A0}.ui-dark .ui-icons-content span:hover{color:#FFF}@media(max-width:767px){.ui-icons .ui-icons-nav span{cursor:pointer;font-size:26px}.ui-icons .ui-icons-content span{min-width:45px}}

.ui-imageviewer{position:fixed;left:0;top:0;bottom:0;right:0;z-index:1000;background-color:rgba(240,240,240,0.9)}.ui-imageviewer img{box-shadow:0 0 10px rgba(0,0,0,0.05)}.ui-imageviewer-loading{position:absolute;left:0;top:45px;right:0;bottom:0;background-color:rgba(255,255,255,0.9);z-index:2}.ui-imageviewer-loading > div{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSI4LjA0MiUiIHkxPSIwJSIgeDI9IjY1LjY4MiUiIHkyPSIyMy44NjUlIiBpZD0iYSI+PHN0b3Agc3RvcC1jb2xvcj0iI0EwQTBBMCIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0EwQTBBMCIgc3RvcC1vcGFjaXR5PSIuNjMxIiBvZmZzZXQ9IjYzLjE0NiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjQTBBMEEwIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMwLTkuOTQtOC4wNi0xOC0xOC0xOCIgc3Ryb2tlPSJ1cmwoI2EpIiBzdHJva2Utd2lkdGg9IjIiPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDE4IDE4IiB0bz0iMzYwIDE4IDE4IiBkdXI9IjAuOXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9wYXRoPjxjaXJjbGUgZmlsbD0iI0EwQTBBMCIgY3g9IjM2IiBjeT0iMTgiIHI9IjEiPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDE4IDE4IiB0bz0iMzYwIDE4IDE4IiBkdXI9IjAuOXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9jaXJjbGU+PC9nPjwvc3ZnPg==) no-repeat 50% 50%;background-size:80px 80px;width:80px;height:80px;position:absolute;left:50%;top:50%;margin:-40px 0 0 -40px}.ui-imageviewer-header{height:45px;border-bottom:1px solid #E0E0E0;background-color:#FFF;box-shadow:0 2px 10px rgba(0,0,0,0.05)}.ui-imageviewer-header > div{line-height:16px;float:left;margin:7px 0 0 15px}.ui-imageviewer-header .help{margin-top:0}.ui-imageviewer-header button{float:right;font-size:14px;background-color:transparent;border:0;margin:0;width:45px;height:44px;border-left:1px solid #E5E5E5;cursor:pointer;color:red;line-height:44px;padding:0}.ui-imageviewer-header button:hover{background-color:#F8F8F8}.ui-imageviewer-buttons{position:absolute;left:0;right:0;top:45px;bottom:0}.ui-imageviewer-buttons button{background-color:#FFF;border:1px solid #FFF;border-radius:var(--radius);width:35px;height:35px;line-height:35px;position:absolute;top:50%;margin-top:-17px;box-shadow:0 0 10px rgba(0,0,0,0.07);padding:0}.ui-imageviewer-buttons button:disabled{color:#A0A0A0;cursor:not-allowed;border-color:#FFF;background-color:#F8F8F8}.ui-imageviewer-buttons button[name='prev']{left:15px}.ui-imageviewer-buttons button[name='next']{right:15px}.ui-imageviewer-viewer{display:table;width:100%}.ui-imageviewer-cell{display:table-cell;width:100%;height:100%;vertical-align:middle;text-align:center}.ui-dark .ui-imageviewer,.ui-dark .ui-imageviewer-loading{background-color:rgba(0,0,0,0.9)}.ui-dark .ui-imageviewer-header b{color:#A0A0A0}.ui-dark .ui-imageviewer-header{background-color:#202020;border-bottom-color:#383838}.ui-dark .ui-imageviewer-header button{border-left-color:#383838}.ui-dark .ui-imageviewer-header button:hover{background-color:#373737;border-left-color:#383838}.ui-dark .ui-imageviewer-buttons button{background-color:#303030;border-color:#363636}.ui-dark .ui-imageviewer-buttons button:disabled{color:#666;background-color:#292929}

.ui-input{position:relative;font-size:13px}.ui-input textarea{tab-size:2;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none;background:transparent}.ui-input textarea:::-webkit-scrollbar{display:none}.ui-input-required .ui-input-control{border-color:#D0D0D0}.ui-input-label{margin-bottom:3px;font-size:12px;color:#777}.ui-input-label i{margin-right:4px}.ui-input-required.ui-input-raw .ui-input-label:before{content:'*';color:red;margin-right:3px}.ui-input-control{border:1px solid #E0E0E0;border-radius:var(--radius);min-height:36px;background-color:#FFF}.ui-input-input{padding:6px 8px 0;position:relative;line-height:24px}.ui-input-checkbox{margin-bottom:5px}.ui-input-checkbox *{height:25px;cursor:pointer}.ui-input-checkbox span{width:20px;height:20px;line-height:21px;font-size:11px;margin:0 7px 0 0;text-align:center;float:left;border:1px solid #D0D0D0;border-radius:4px;background:#FFF}.ui-input-checkbox span i{display:none;font-weight:bold}.ui-input-checkbox label{line-height:19px}.ui-input-checked .ui-input-checkbox span i{display:inline-block}.ui-disabled .ui-input-checkbox{color:#A0A0A0}.ui-disabled.ui-input *, .ui-disabled.ui-input{cursor:not-allowed !important}.ui-disabled .ui-input-checkbox span{background-color:#F0F0F0;color:#B0B0B0;border-color:#E0E0E0}.ui-input-placeholder{pointer-events:none;position:absolute;color:gray;margin:0;user-select:none;width:100%;text-align:left;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ui-input-control input, .ui-input-control textarea{border:0;outline:0;background:transparent !important;width:100%;padding:0;margin:0;line-height:16px;font-size:13px;color:#000;font-family:Arial;resize:none}.ui-input-control textarea{padding:4px 0}.ui-input-control .ui-input-value{line-height:24px;height:22px;cursor:pointer;border-radius:var(--radius);outline:0}.ui-input-control input::-ms-expand{display:none}.ui-input-icon-left{width:34px;height:34px;line-height:33px;float:left;text-align:center;border-right:1px solid #E0E0E0}.ui-input-icon-right{width:34px;height:34px;line-height:33px;float:right;border-left:1px solid #E0E0E0;text-align:center}.ui-input-required .ui-input-icon-left{border-color:#D0D0D0}.ui-input-required .ui-input-icon-right{border-color:#D0D0D0}.ui-input-ricon .ui-input-input{margin-right:37px}.ui-input-licon .ui-input-input{margin-left:34px}.ui-input-ricon .ti-times, .ui-input-licon .ti-times{color:red}.ui-input-value{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ui-input-click{cursor:pointer}.ui-input-error{margin-top:7px;font-size:11px;color:red}.ui-input .right input{text-align:right}.ui-input .right .ui-input-placeholder{text-align:right;padding-right:15px}.ui-input .center input{text-align:center}.ui-input .center .ui-input-placeholder{text-align:center;padding-right:15px}.ui-input-dropdown, .ui-input-dropdown input, .ui-input-dropdown .ui-input-placeholder{cursor:pointer}.ui-input-invalid .ui-input-control, .ui-input-invalid .ui-input-icon-left, .ui-input-invalid .ui-input-icon-right{border-color:red !important}.ui-input.ui-disabled .ui-input-control{background-color:#F0F0F0;color:#777}.ui-input.ui-disabled input{background-color:#F0F0F0;color:#A0A0A0}.ui-input.ui-disabled .ui-input-placeholder{color:#A0A0A0}.ui-input.ui-disabled .ui-input-icon-left, .ui-input.ui-disabled .ui-input-icon-right{color:gray}.ui-input-dropdown.ui-disabled .ui-input-control{cursor:not-allowed !important}.ui-input-raw .ui-input-increment{padding:7px 0 0 !important}.ui-input-increment i{line-height:11px;font-size:10px;cursor:pointer;display:block}.ui-input-increment i:first-child{margin-left:0}.ui-input-required.ui-input-inner .ui-input-label:after{content:'*';color:red;margin-left:3px}.ui-input-inner{background-color:#F5F5F5;border:1px solid #E5E5E5;padding:10px 5px 10px 10px;width:100%;border-radius:var(--radius)}.ui-input-inner.ui-disabled .ui-input-control{background-color:transparent !important}.ui-input-inner .ui-input-increment{padding-top:2px;color:#777}.ui-input-inner .ui-input-label{height:18px;margin:0;color:#6A7280;font-weight:bold}.ui-input-inner .ui-input-placeholder{color:#9DA4B0}.ui-input-inner input, .ui-input-inner textarea{font-size:14px}.ui-input-inner .ui-input-input{padding:0;font-size:14px}.ui-input-inner .ui-input-control{min-height:24px;border:0;background-color:transparent}.ui-input-inner .ui-input-icon-left, .ui-input-inner .ui-input-icon-right{height:24px;line-height:24px;color:#777;font-size:15px}.ui-input-inner.ui-input-focused{border-color:var(--color);box-shadow:0 0 #0000,0 0 #0000,0px 0px 0px 4px #4AAEFF1A}.ui-input-inner.ui-input-invalid{border-color:#EEB7B7;box-shadow:0 0 #0000,0 0 #0000,0px 0px 0px 4px #D85A5A1A}.ui-input-inner .ui-input-checkbox{margin-bottom:0}.ui-input-inner .ui-input-icon-right{border:0;padding-left:10px}.ui-input-masked input{letter-spacing:1px;font-family:Menlo,Consolas,monospace}.ui-input-monospace input, .ui-input-monospace textarea{font-family:Menlo,Consolas,monospace}.ui-input-icon-custom{font-size:11px}.ui-input-inner .ui-input-value{line-height:24px;height:24px}.ui-input-type-icon .ui-input-value, .ui-input-type-emoji .ui-input-value{font-size:15px}.ui-input-type-icon .ui-input-control, .ui-input-type-color .ui-input-control, .ui-input-type-color .ui-input-emoji{cursor:pointer}.ui-input-radiobuttons{margin-top:5px}.ui-input-radiobuttons > div{position:relative;display:inline-block;margin-left:10px;cursor:pointer;height:26px;line-height:21px}.ui-input-radiobuttons.ui-input-multiline > div{display:block;margin-left:0}.ui-input-radiobuttons > div:first-child{margin-left:0}.ui-input-radiobuttons > div span{border-radius:var(--radius);float:left;border:1px solid #D0D0D0;background-color:#FFF;width:20px;height:20px;margin-right:7px;padding:3px}.ui-input-radiobuttons > div.ui-input-checked i{border-radius:var(--radius);background-color:#000;height:12px;display:block}.ui-disabled .ui-input-radiobuttons > div span{border-color:#E0E0E0;background:#F0F0F0}.ui-disabled .ui-input-radiobuttons > div{color:#A0A0A0}.ui-disabled .ui-input-radiobuttons > div.ui-input-checked i{background-color:#B0B0B0}.ui-dark .ui-input-required .ui-input-control{border-color:#505050}.ui-dark .ui-input-raw .ui-input-control{border-color:#404040;background-color:#202020 !important;box-shadow:0 1px 4px rgba(0,0,0,0.3)}.ui-dark .ui-input-required .ui-input-icon-left{border-color:#404040}.ui-dark .ui-input-required .ui-input-icon-right{border-color:#404040}.ui-dark .ui-input-control input, .ui-dark .ui-input-control textarea{background-color:transparent;color:#FFF}.ui-dark .ui-input-icon-left, .ui-dark .ui-input-icon-right{border-color:#303030;color:gray}.ui-dark .ui-input.ui-disabled .ui-input-control{background-color:#282828;color:#999}.ui-dark .ui-input.ui-disabled input{background-color:#282828;color:#777}.ui-dark .ui-input.ui-disabled .ui-input-placeholder{color:#777}.ui-dark .ui-input-checkbox span{border-color:#404040;background:#252525}.ui-dark .ui-input-inner{background-color:#252525;border-color:#303030}.ui-dark .ui-input-inner.ui-disabled .ui-input-control{background-color:transparent !important}.ui-dark .ui-input-inner.ui-input-focused{border-color:var(--color);box-shadow:0 0 #0000,0 0 #0000,0px 0px 0px 4px #4AAEFF3F}.ui-dark .ui-input-inner.ui-input-invalid{border-color:#8E3D3D;box-shadow:0 0 #0000,0 0 #0000,0px 0px 0px 4px #D85A5A42}.ui-dark .ui-disabled .ui-input-checkbox span{background-color:#282828;color:#999;border-color:#303003}.ui-dark .ui-disabled .ui-input-checkbox{color:#666}.ui-dark .ui-input-radiobuttons > div span{border-color:#404040;background:#252525}.ui-dark .ui-input-radiobuttons > div.ui-input-checked i{background-color:#E0E0E0}.ui-dark .ui-disabled .ui-input-radiobuttons > div span{border-color:#303003;background:#282828}.ui-dark .ui-disabled .ui-input-radiobuttons > div{color:#666}.ui-dark .ui-disabled .ui-input-radiobuttons > div.ui-input-checked i{background-color:#666}

.ui-menu-area{position:absolute;left:0;right:0;bottom:0;top:0;z-index:100}.ui-menu{position:absolute;z-index:1;transform-origin:top left;padding:10px 0}.ui-menu-items{background-color:#FFF;padding:5px 0;border-radius:var(--radius);box-shadow:2px 5px 10px rgba(0,0,0,0.05);border:1px solid #E0E0E0;position:relative}.ui-menu-submenu{position:absolute;z-index:101;background-color:#FFF;padding:5px 0;border-radius:var(--radius);box-shadow:2px 5px 10px rgba(0,0,0,0.05);border:1px solid #E0E0E0}.ui-menu-visible{}.ui-menu ul{margin:0;padding:0}.ui-menu li{margin:0;padding:5px;list-style-type:none;font-size:12px;cursor:pointer}.ui-menu-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:15px}.ui-menu-note{font-size:10px;margin:0 10px 3px 35px;color:#A0A0A0;line-height:11px}.ui-menu-nofa .ui-menu-note{margin-left:0}.ui-menu-selected{background-color:#F5F5F5}.ui-menu li:hover{background-color:#F0F0F0}.ui-menu-nofa{padding-left:12px !important}.ui-menu .pull-right{margin:1px 5px 0 0;width:20px;text-align:right;font-size:10px}.ui-menu-name i{width:30px;margin:0 5px 0 0;text-align:center;color:#000}.ui-menu-name b{position:absolute;right:10px;font-size:11px;color:gray;margin:1px 5px 0}.ui-menu-divider{padding:0 !important;background:transparent !important;cursor:default !important;color:gray;font-size:11px !important}.ui-menu-divider span{display:block;margin:5px 12px}.ui-menu-divider hr{margin:5px 0;border-color:#E0E0E0}.ui-menu li.ui-menu-disabled{color:#a0a0a0;background-color:#FFF;cursor:not-allowed}.ui-menu li.ui-menu-disabled i{color:#c5c5c5 !important}.ui-menu-style-2 .ui-menu-items{border-radius:var(--radius)}.ui-menu-style-2 li{margin:2px 10px;padding:7px 2px;border-radius:var(--radius);font-size:13px}.ui-menu-style-2 .pull-right{margin-top:3px}.ui-menu-style-2 .ui-menu-submenu{border-radius:var(--radius)}.ui-menu-style-2 .ui-menu-divider{margin:7px 0}.ui-menu-style-2 .ui-menu-divider span{padding-left:10px}.ui-dark .ui-menu b{color:#505050}.ui-dark .ui-menu-items,.ui-dark .ui-menu-submenu{background-color:#303030;border-color:#353535;box-shadow:1px 5px 10px rgba(0,0,0,0.2)}.ui-dark .ui-menu-name i{color:#FFF}.ui-dark .ui-menu-selected{background-color:#252525}.ui-dark .ui-menu li:hover{background-color:#202020}.ui-dark .ui-menu-divider hr{border-color:#404040}.ui-dark .ui-menu-note{color:#777}.ui-dark .ui-menu li.ui-menu-disabled{background-color:#303030;color:#656565}.ui-dark .ui-menu li.ui-menu-disabled i{color:#525252 !important}.ui-large .ui-menu-divider{font-size:14px !important}.ui-large .ui-menu li{font-size:14px;padding:7px 15px}.ui-large.ui-menu li{font-size:14px;padding:7px 15px}.ui-large .ui-menu-note{font-size:13px}@media (max-width:600px){.ui-menu-mobile.ui-menu-style-1 .ui-menu-divider{margin:7px 0;font-size:13px !important}.ui-menu-mobile.ui-menu-style-1 li{margin:0;padding:5px 8px;list-style-type:none;font-size:15px;cursor:pointer}.ui-menu-mobile.ui-menu-style-2 li{margin:2px 10px;padding:6px 5px;border-radius:var(--radius);font-size:15px}.ui-menu-mobile.ui-menu-style-2 .ui-menu-divider{margin:7px 0;font-size:13px !important}.ui-menu-mobile.ui-menu-style-2 .ui-menu-divider span{padding-left:12px}.ui-menu-mobile .ui-menu-note{font-size:12px}}

.ui-message{background-color:rgba(255,255,255,0.9);position:fixed;left:0;right:0;bottom:0;top:0;z-index:1010;width:100%;display:table;height:100%;transition:0.3s all;opacity:0}.ui-message > div{display:table-cell;vertical-align:middle;text-align:center;padding:15px}.ui-message-body{padding:30px 25px 20px;position:relative;display:inline-block;color:#000;border-radius:var(--radius);max-width:500px;text-align:left;transform:scale(1.5);transition:0.2s all;box-shadow:0 5px 20px rgba(0,0,0,0.1);background-color:#FFF;border-width:3px;border-style:solid}.ui-message-warning .ui-message-body{border-color:#DA4453;min-width:300px}.ui-message-success .ui-message-body{border-color:#8CC152;min-width:300px}.ui-message-info .ui-message-body{border-color:var(--color);min-width:300px}.ui-message button{display:block;min-width:100px;margin:20px auto 0;cursor:pointer;outline:0;background-color:#FFF;border:1px solid #E0E0E0;border-radius:var(--radius);color:#000;padding:0 20px;height:34px;font-weight:bold}.ui-message button:hover{background-color:#F0F0F0}.ui-message button:active{border-color:#D0D0D0}.ui-message-icon{border-radius:100px;width:60px;height:60px;padding:0;line-height:54px;font-size:30px;text-align:center;position:absolute;left:50%;border:4px solid #3BAFDA;margin-left:-30px;z-index:5;background-color:#FFF;color:#3BAFDA;margin-top:-40px;transform:scale(2);transition:all 0.3s}.ui-message-icon-animate{transform:scale(1)}.ui-message-success .ui-message-icon{border-color:#8CC152;color:#8CC152}.ui-message-warning .ui-message-icon{border-color:#DA4453;color:#DA4453}.ui-message-info .ui-message-icon{border-color:var(--color);color:var(--color)}.ui-message-error i{margin-right:5px;color:red}.ui-message-visible{opacity:1}.ui-message-visible .ui-message-body{transform:scale(1)}.ui-message2{background-color:rgba(220,220,220,0.9)}.ui-message2 .ui-message-body{padding:110px 0 0;border-width:0;border-radius:var(--radius);max-width:400px}.ui-message2 .ui-message-text{padding:0 20px 30px;text-align:center}.ui-message2 hr{display:none}.ui-message2 button{width:100%;border:0 !important;color:#FFF;border-radius:0 0 var(--radius) var(--radius);height:40px;margin:0}.ui-message2 button:hover{opacity:0.9}.ui-message2.ui-message-success button{background-color:#8CC152}.ui-message2.ui-message-warning button{background-color:#DA4453}.ui-message2.ui-message-info button{background-color:var(--color)}.ui-message2 .ui-message-icon{margin-top:30px;border-radius:0;border:0;background:transparent !important;font-size:50px}.ui-dark .ui-message2,.ui-dark .ui-message{background-color:rgba(50,50,50,0.9)}.ui-dark .ui-message-body{background-color:#202020;color:#FFF}.ui-dark .ui-message button{background-color:#404040;border-color:#404040;color:#FFF}.ui-dark .ui-message button:hover{background-color:#444}.ui-dark .ui-message button:active{border-color:#505050}.ui-dark .ui-message2.ui-message-success button{background-color:#8CC152}.ui-dark .ui-message2.ui-message-warning button{background-color:#DA4453}.ui-dark .ui-message2.ui-message-info button{background-color:var(--color)}.ui-dark .ui-message-icon{background-color:#202020}.ui-dark .ui-message hr{border-color:#404040}

.ui-mobilecarousel{overflow:hidden;visibility:visible}.ui-mobilecarousel .ui-mobilecarousel-container{width:100%;overflow-x:scroll;overflow-y:hidden;overflow-scrolling:touch;-webkit-overflow-scrolling:touch}.ui-mobilecarousel .ui-mobilecarousel-body{padding-bottom:30px}.ui-mobilecarousel .row{margin:0}`);

COMPONENT('approve','cancel:Cancel',function(self,config,cls){var cls2='.'+cls,events={},buttons,oldcancel;self.readonly();self.singleton();self.nocompile&&self.nocompile();self.make=function(){self.aclass(cls+' hidden');self.aclass(cls+'-style-'+(config.style||1));self.html('<div><div class="{0}-body"><span class="{0}-close"><i class="ti ti-times"></i></span><div class="{0}-content"></div><div class="{0}-buttons"><button data-index="0"></button><button data-index="1"></button></div></div></div>'.format(cls));buttons=self.find(cls2+'-buttons').find('button');self.event('click','button',function(){self.hide(+$(this).attrd('index'))});self.event('click',cls2+'-close',function(){self.callback=null;self.hide(-1)});self.event('click',function(e){var t=e.target.tagName;if(t!=='DIV')return;var el=self.find(cls2+'-body');el.aclass(cls+'-click');setTimeout(function(){el.rclass(cls+'-click')},300)})};events.keydown=function(e){var index=e.which===13?0:e.which===27?1:null;if(index!=null){self.find('button[data-index="{0}"]'.format(index)).trigger('click');e.preventDefault();e.stopPropagation();events.unbind()}};events.bind=function(){$(W).on('keydown',events.keydown)};events.unbind=function(){$(W).off('keydown',events.keydown)};self.show=function(message,a,b,fn,cancel){clearTimeout2(self.id);if(typeof(b)==='function'){cancel=fn;fn=b;b=config.cancel}if(M.scope)self.currscope=M.scope();self.callback=fn;self.callbackcancel=typeof(cancel)==='function'?cancel:null;var icon=a.match(/[":][a-z0-9-\s]+[":]/);if(icon){var tmp=icon+'';if(tmp.indexOf(' ')==-1)tmp='ti ti-'+tmp;a=a.replace(icon,'').trim();icon='<i class="{0}"></i>'.format(tmp.replace(/"|:/g,''))}else icon='';var color=a.match(/#[0-9a-f]+/i);if(color)a=a.replace(color,'').trim();buttons.eq(0).css('background-color',color||'').html(icon+a);if(oldcancel!==b){oldcancel=b;buttons.eq(1).html(b)}self.find(cls2+'-content').html(message.replace(/\n/g,'<br />'));$('html').aclass(cls+'-noscroll');self.rclass('hidden');events.bind();self.aclass(cls+'-visible',5);document.activeElement&&document.activeElement.blur()};self.hide=function(index){if(!index){self.currscope&&M.scope(self.currscope);self.callback&&self.callback()}else if(self.callbackcancel)self.callbackcancel();self.rclass(cls+'-visible');events.unbind();setTimeout2(self.id,function(){$('html').rclass(cls+'-noscroll');self.aclass('hidden')},50)}});

COMPONENT('datepicker','today:Set today;clear:Clear;firstday:-1',function(self,config,cls){var cls2='.'+cls,skip=false,visible=false,current,elyears,elmonths,elbody,main;self.days=EMPTYARRAY;self.days_short=EMPTYARRAY;self.months=EMPTYARRAY;self.months_short=EMPTYARRAY;self.years_from;self.years_to;self.singleton();self.readonly();self.nocompile();self.configure=function(key,value){switch(key){case'days':if(value instanceof Array)self.days=value;else self.days=value.split(',').trim();self.days_short=[];for(var i=0;i<DAYS.length;i++){DAYS[i]=self.days[i];self.days_short[i]=DAYS[i].substring(0,2).toUpperCase()}break;case'months':if(value instanceof Array)self.months=value;else self.months=value.split(',').trim();self.months_short=[];for(var i=0,length=self.months.length;i<length;i++){var m=self.months[i];MONTHS[i]=m;if(m.length>4)m=m.substring(0,3)+'.';self.months_short.push(m)}break;case'yearfrom':if(value.indexOf('current')!==-1)self.years_from=+(NOW.format('yyyy'));else self.years_from=+(NOW.add(value).format('yyyy'));break;case'yearto':if(value.indexOf('current')!==-1)self.years_to=+(NOW.format('yyyy'));else self.years_to=+(NOW.add(value).format('yyyy'));break}};function getMonthDays(dt){var m=dt.getMonth();var y=dt.getFullYear();if(m===-1){m=11;y--}return(32-new Date(y,m,32).getDate())}self.calculate=function(year,month,selected){var d=new Date(year,month,1,12,0);var output={header:[],days:[],month:month,year:year},firstday=config.firstday===-1?DEF.firstdayofweek:config.firstday,firstcount=0,frm=d.getDay()-firstday;var today=NOW,ty=today.getFullYear();var tm=today.getMonth();var td=today.getDate();var sy=selected?selected.getFullYear():-1;var sm=selected?selected.getMonth():-1;var sd=selected?selected.getDate():-1;var days=getMonthDays(d);if(frm<0)frm=7+frm;while(firstcount++<7){output.header.push({index:firstday,name:self.days_short[firstday]});firstday++;if(firstday>6)firstday=0}var index=0,indexEmpty=0,count=0,prev=getMonthDays(new Date(year,month-1,1,12,0))-frm;var cur;for(var i=0;i<days+frm;i++){var obj={today:false,selected:false,empty:false,future:false,number:0,index:++count};if(i>=frm){obj.number=++index;obj.selected=sy===year&&sm===month&&sd===index;obj.today=ty===year&&tm===month&&td===index;obj.future=ty<year;if(!obj.future&&year===ty){if(tm<month)obj.future=true;else if(tm===month)obj.future=td<index}}else{indexEmpty++;obj.number=prev+indexEmpty;obj.empty=true;cur=d.add('-'+indexEmpty+' days')}if(!obj.empty)cur=d.add(i+' days');obj.month=i>=frm&&obj.number<=days?d.getMonth():cur.getMonth();obj.year=i>=frm&&obj.number<=days?d.getFullYear():cur.getFullYear();obj.date=cur;output.days.push(obj)}indexEmpty=0;for(var i=count;i<42;i++){var cur=d.add(i+' days');var obj={today:false,selected:false,empty:true,future:true,number:++indexEmpty,index:++count};obj.month=cur.getMonth();obj.year=cur.getFullYear();obj.date=cur;output.days.push(obj)}return output};self.hide=function(){if(visible){self.unbindevents();self.opt.close&&self.opt.close();self.opt=null;self.older=null;self.target=null;self.aclass('hidden');self.rclass(cls+'-visible');visible=false}return self};self.show=function(opt){setTimeout(function(){clearTimeout2('datepickerhide')},5);var el=$(opt.element);var dom=el[0];if(self.target===dom){self.hide();return}if(self.opt&&self.opt.close)self.opt.close();var off=el.offset();var w=el.innerWidth();var h=el.innerHeight();var l=0,t=0,height=305+(opt.cancel?25:0);var s=250;if(opt.element){switch(opt.align){case'center':l=Math.ceil((off.left-s/2)+(w/2));break;case'right':l=(off.left+w)-s;break;default:l=off.left;break}t=opt.position==='bottom'?(off.top-height):(off.top+h+12)}if(opt.offsetX)l+=opt.offsetX;if(opt.offsetY)t+=opt.offsetY;if((l+s)>WW)l=(l+w)-s;if($(W).scrollTop()===0){if((t+height)>WH)t=WH-height-10}var restrict=true,parent=dom.parentNode;while(parent){if(parent.tagName==='BODY'){restrict=false;break}if(parent.classList.contains('ui-scrollbar-area'))break;parent=parent.parentNode}if(restrict&&(t+height)>WH)t=(t+h)-height;var dt=typeof(opt.value)==='string'?GET(opt.value):opt.value;if((!(dt instanceof Date))||isNaN(dt.getTime()))dt=NOW;opt.scope=M.scope?M.scope():'';self.opt=opt;self.time=dt.format('HH:mm:ss');self.rclass('hidden');self.date(dt);main.css({left:l,top:t});main.aclass(cls+'-visible',50);self.bindevents();self.target=dom;visible=true};self.setdate=function(dt){if(!dt){if(typeof(self.opt.value)==='string')SET(self.opt.value+' @change',dt);else self.opt.callback(dt);return}var time=self.time.split(':');if(time.length>1){dt.setHours(+(time[0]||'0'));dt.setMinutes(+(time[1]||'0'));dt.setSeconds(+(time[2]||'0'))}self.opt.scope&&M.scope(self.opt.scope);if(typeof(self.opt.value)==='string')SET(self.opt.value+' @change',dt);else self.opt.callback(dt)};self.make=function(){self.aclass(cls+'-container hidden');var conf={},reconfigure=false;if(!config.days){conf.days=[];for(var i=0;i<DAYS.length;i++)conf.days.push(DAYS[i]);reconfigure=true}if(!config.months){conf.months=MONTHS;reconfigure=true}reconfigure&&self.reconfigure(conf);W.$datepicker=self;self.event('click',function(e){e.stopPropagation()});var hide=function(){visible&&W.$datepicker&&W.$datepicker.hide()};var hide2=function(){visible&&setTimeout2('datepickerhide',function(){W.$datepicker&&W.$datepicker.hide()},20)};self.bindevents=function(){if(!visible)$(W).on('scroll',hide2)};self.unbindevents=function(){if(visible)$(W).off('scroll',hide2)};self.element.on('click',function(e){if(e.target===self.dom)hide()});self.on('reflow + scroll + resize + resize2',hide)};self.makehtml=function(){var builder=[];builder.push('<div class="{0}-header"><span class="{0}-next"><i class="ti ti-angle-right"></i></span><span class="{0}-prev"><i class="ti ti-angle-left"></i></span><div class="{0}-info"><span class="{0}-month">---</span><span class="{0}-year">---</span></div></div><div class="{0}-years hidden"></div><div class="{0}-months"></div><div class="{0}-body hidden"><div class="{0}-week">'.format(cls));for(var i=0;i<7;i++)builder.push('<div></div>');builder.push('</div><div class="{0}-days">'.format(cls));var clearbtn=self.opt.clear===false?null:'<span>{1}</span>'.format(cls,config.clear);for(var i=0;i<42;i++)builder.push('<div class="{0}-date"><div></div></div>'.format(cls,i));builder.push('</div></div><div class="{0}-footer"><span class="{0}-now">{2}</span><span class="{0}-clear">{3}</span></div>'.format(cls,config.close,config.today,clearbtn));self.html('<div class="{0}">{1}</div>'.format(cls,builder.join('')));main=$(self.find(cls2)[0]);builder=[];elbody=self.find(cls2+'-body');elmonths=self.find(cls2+'-months');for(var i=0;i<12;i++)builder.push('<div class="{0}-month" data-index="{1}"><div></div></div>'.format(cls,i));elmonths.html(builder.join(''));builder=[];elyears=self.find(cls2+'-years');for(var i=0;i<25;i++)builder.push('<div class="{0}-year"><div></div></div>'.format(cls));elyears.html(builder.join(''));self.makehtml=null;self.find(cls2+'-month').on('click',function(e){var el=$(this);var index=el.attrd('index');var h='hidden';if(index){current.setMonth(+index);self.date(current,true)}else if(!elmonths.hclass(h))index=1;elyears.aclass(h);if(index)elmonths.aclass(h);else{elmonths.find(cls2+'-today').rclass(cls+'-today');elmonths.find(cls2+'-month').eq(current.getMonth()).aclass(cls+'-today');elmonths.rclass(h)}elbody.tclass(h,!elmonths.hclass(h));e.preventDefault();e.stopPropagation()});self.find(cls2+'-year').on('click',function(e){var el=$(this);var year=el.attrd('year');var h='hidden';if(year){current.setFullYear(+year);self.date(current,true)}else if(!elyears.hclass(h))year=1;elmonths.aclass(h);if(year)elyears.aclass(h);else{self.years();elyears.rclass(h)}elbody.tclass(h,!elyears.hclass(h));e.preventDefault();e.stopPropagation()});self.years=function(){var dom=self.find(cls2+'-years').find(cls2+'-year');var year=current.getFullYear();var index=12;for(var i=0;i<25;i++){var val=year-(index--);$(dom[i]).tclass(cls+'-today',val===year).attrd('year',val).find('div')[0].innerHTML=val}};self.find(cls2+'-date').on('click',function(){var dt=$(this).attrd('date').split('-');self.setdate(new Date(+dt[0],+dt[1],+dt[2],12,0,0));self.hide()});self.find(cls2+'-now').on('click',function(){current=new Date();self.date(current,true)});self.find(cls2+'-clear').on('click',function(){self.setdate(null);self.hide()});self.find(cls2+'-next').on('click',function(e){if(elyears.hclass('hidden')){current.setMonth(current.getMonth()+1);self.date(current,true)}else{current.setFullYear(current.getFullYear()+25);self.years()}e.preventDefault();e.stopPropagation()});self.find(cls2+'-prev').on('click',function(e){if(elyears.hclass('hidden')){current.setMonth(current.getMonth()-1);self.date(current,true)}else{current.setFullYear(current.getFullYear()-25);self.years()}e.preventDefault();e.stopPropagation()})};self.date=function(value,skipday){var clssel=cls+'-selected';self.makehtml&&self.makehtml();if(typeof(value)==='string')value=value.parseDate();var year=value==null?null:value.getFullYear();if(year&&(year<self.years_from||year>self.years_to))return;if(!value||isNaN(value.getTime())){self.find('.'+clssel).rclass(clssel);value=NOW}var empty=!value;if(skipday){skipday=false;empty=true}if(skip){skip=false;return}value=new Date((value||NOW).getTime());var output=self.calculate(value.getFullYear(),value.getMonth(),value);var dom=self.find(cls2+'-date');self.find(cls2+'-body').rclass('hidden');self.find(cls2+'-months,'+cls2+'-years').aclass('hidden');current=value;for(var i=0;i<42;i++){var item=output.days[i],classes=[cls+'-date'];if(item.empty)classes.push(cls+'-disabled');if(!empty&&item.selected)classes.push(cls+'-selected');if(item.today)classes.push(cls+'-day-today');var el=$(dom[i]);el.attrd('date',item.year+'-'+item.month+'-'+item.number);el.find('div').html(item.number);el.find('i').remove();el.rclass().aclass(classes.join(' '))}if(!skipday){dom=self.find(cls2+'-week').find('div');for(var i=0;i<7;i++)dom[i].innerHTML=output.header[i].name;dom=self.find(cls2+'-months').find(cls2+'-month');for(var i=0;i<12;i++)$(dom[i]).find('div').attrd('index',i)[0].innerHTML=self.months_short[i]}self.opt.badges&&self.opt.badges(current,function(date){if(!(date instanceof Array))date=[date];for(var i=0;i<date.length;i++){var dt=date[i].getFullYear()+'-'+date[i].getMonth()+'-'+date[i].getDate();var el=self.find(cls2+'-date[data-date="{0}"]'.format(dt));if(el.length&&!el.find('i').length)el.append('<i class="ti ti-circle-alt"></i>')}});var info=self.find(cls2+'-info');info.find(cls2+'-month').html(self.months[current.getMonth()]);info.find(cls2+'-year').html(current.getFullYear())}});

COMPONENT('directory','minwidth:200;create:Create',function(self,config,cls){var cls2='.'+cls,container,timeout,icon,plus,skipreset=false,skipclear=false,ready=false,input=null,issearch=false,is=false,selectedindex=0,resultscount=0,templateE='{{ name | encode | ui_directory_helper}}',templateR='{{ name | raw}}',template='<li data-index="{{ $.index}}" data-search="{{ $.search}}" class="{{ $.classes}}">{{ if $.checkbox}}<span class="'+cls+'-checkbox"><i class="ti ti-check"></i></span>{{ fi}}{0}</li>',templateraw=template.format(templateR);var regstrip=/(&nbsp;|<([^>]+)>)/ig;var parentclass=null,parentclass2=null,skiphide=false,skipmouse=false,customvalue,search,main;template=template.format(templateE);Thelpers.ui_directory_helper=function(val){var t=this;return self.opt.templatecompiled?self.opt.templatecompiled(this):t.template?(typeof(t.template)==='string'?t.template.indexOf('{{')===-1?t.template:Tangular.render(t.template,this):t.render(this,val)):self.opt.render?self.opt.render(this,val):val};self.template=Tangular.compile(template);self.templateraw=Tangular.compile(templateraw);self.readonly();self.singleton();self.nocompile();self.configure=function(key,value,init){if(init)return;switch(key){case'placeholder':self.find('input').prop('placeholder',value);break}};self.make=function(){self.aclass('hidden '+cls+'-area');self.append('<div class="{1}"><div class="{1}-search"><span class="{1}-add hidden"><i class="ti ti-plus"></i></span><span class="{1}-button"><i class="ti ti-search"></i></span><div><input type="text" placeholder="{0}" class="{1}-search-input" name="dir{2}" spellcheck="false" role="combobox" aria-expanded="true" aria-invalid="false" aria-autocomplete="list" aria-expanded="true" aria-haspopup="false" autocapitalize="off" autocomplete="off" autocorrect="off" /></div></div><div class="{1}-container"><ul></ul></div></div>'.format(config.placeholder,cls,Date.now()));customvalue=$('<li data-index="-2"></li>')[0];main=self.find(cls2);container=self.find('ul');input=self.find('input');icon=self.find(cls2+'-button').find('.ti');plus=self.find(cls2+'-add');search=self.find(cls2+'-search');self.event('mouseenter mouseleave','li',function(){if(ready&&!issearch&&!skipmouse){container.find('li.current').rclass('current');$(this).aclass('current');var arr=container.find('li:visible');for(var i=0;i<arr.length;i++){if($(arr[i]).hclass('current')){selectedindex=i;break}}}});self.element.on('click',function(e){if(e.target===self.dom)self.hide(1)});var skiphidedelay,skipmousedelay,skipmousefalse=function(){skipmousedelay=null;skipmouse=false};var skipmouseforce=function(){skipmouse=true;skipmousedelay&&clearTimeout(skipmousedelay);skipmousedelay=setTimeout(skipmousefalse,500)};self.event('focus','input',function(){skiphide=true;skiphidedelay&&clearTimeout(skiphidedelay);skiphidedelay=setTimeout(function(){skiphide=false},800);if(self.opt.search===false)$(this).blur()});self.event('click',cls2+'-button',function(e){skipclear=false;input.val('');self.search();e.stopPropagation();e.preventDefault()});self.event('click',cls2+'-add',function(){if(self.opt.custom&&self.opt.callback){self.opt.scope&&M.scope(self.opt.scope);self.opt.callback(input.val(),self.opt.element,true);self.hide()}});self.event('click','li',function(e){var el=$(this);if(el.hclass('ui-disabled'))return;if(self.opt.callback){self.opt.scope&&M.scope(self.opt.scope);var index=+el.attrd('index');if(index===-2){self.opt.scope&&M.scope(self.opt.scope);self.opt.callback(input.val(),self.opt.element,true);self.hide();return}var item=self.opt.items[index];if(self.opt.checkbox){item.selected=!item.selected;if(item.selected)item.selectedts=Date.now();else delete item.selectedts;el.tclass('selected',item.selected);if(self.opt.checked){var tmpindex=self.opt.checked.indexOf(item.id);if(item.selected){if(tmpindex===-1)self.opt.checked.push(item.id)}else if(tmpindex!==-1)self.opt.checked.splice(tmpindex,1)}var response=null;if(self.opt.checked){response=self.opt.checked.slice(0)}else{response=[];for(var i=0;i<self.opt.items.length;i++){var m=self.opt.items[i];if(m.selected)response.push(m)}}response.quicksort('selectedts');self.opt.callback(response,self.opt.element,false,e)}else self.opt.callback(item,self.opt.element,false,e)}is=true;if(!self.opt.checkbox){self.hide(0);e.preventDefault();e.stopPropagation()}});self.event('keydown','input',function(e){var o=false;switch(e.which){case 8:skipclear=false;break;case 27:o=true;self.hide();break;case 13:o=true;var sel=self.find('li.current');if(!sel.hclass('ui-disabled'))sel.trigger('click');break;case 38:o=true;selectedindex--;if(selectedindex<0)selectedindex=0;self.move();break;case 40:o=true;selectedindex++;if(selectedindex>=resultscount)selectedindex=resultscount;self.move();break}if(o){skipmouseforce();e.preventDefault();e.stopPropagation()}});self.event('input','input',function(){issearch=true;setTimeout2(self.ID,self.search,100,null,this.value)});var fn=function(){is&&!skiphide&&self.hide(1)};self.on('reflow + scroll + resize + resize2',fn);$(W).on('scroll',fn)};self.move=function(){var counter=0,scroller=container.parent();var li=container.find('li');var hli=0,was=false,last=-1,lastselected=0,plus=0;for(var i=0;i<li.length;i++){var el=$(li[i]);if(el.hclass('hidden')){el.rclass('current');continue}var is=selectedindex===counter;el.tclass('current',is);if(is){hli=(el.innerHeight()||30)+1;plus=(hli*2);was=true;var t=(hli*(counter||1));scroller[0].scrollTop=t-plus}counter++;last=i;lastselected++}if(!was&&last>=0){selectedindex=lastselected;li.eq(last).aclass('current')}};var nosearch=function(){issearch=false};self.nosearch=function(){setTimeout2(self.ID+'nosearch',nosearch,500)};self.search=function(value){if(!self.opt)return;icon.tclass('ti-times',!!value).tclass('ti-search',!value);if(self.opt.custom){plus.tclass('hidden',!value);customvalue.innerHTML=(typeof(self.opt.custom)==='string'?self.opt.custom:config.create)+': <b>'+(value?Thelpers.encode(value.toString()):'...')+'</b>'}if(!value&&!self.opt.ajax){if(!skipclear)container.find('li').rclass('hidden');if(!skipreset)selectedindex=0;resultscount=self.opt.items?self.opt.items.length:0;customvalue.classList.toggle('hidden',!value);self.move();self.nosearch();return}resultscount=0;selectedindex=0;if(self.opt.ajax){var val=value||'';if(self.ajaxold!==val){self.ajaxold=val;setTimeout2(self.ID,function(val){self.opt&&self.opt.ajax(val,function(items){var builder=[],indexer={},item,key=(self.opt.search==true?self.opt.key:(self.opt.search||self.opt.key))||'name';for(var i=0;i<items.length;i++){item=items[i];if(self.opt.exclude&&self.opt.exclude(item))continue;if(self.opt.checked)item.selected=self.opt.checked.indexOf(item.id)!==-1;indexer.index=i;indexer.search=item[key]?item[key].replace(regstrip,''):'';indexer.checkbox=self.opt.checkbox===true;resultscount++;builder.push(self.opt.ta(item,indexer))}if(self.opt.empty){item={};var tmp=self.opt.raw?'<b>{0}</b>'.format(self.opt.empty):self.opt.empty;item[self.opt.key||'name']=tmp;if(!self.opt.raw)item.template='<b>{0}</b>'.format(self.opt.empty);indexer.index=-1;builder.unshift(self.opt.ta(item,indexer))}if(customvalue.parentNode)customvalue.parentNode.removeChild(customvalue);skipclear=true;self.opt.items=items;container.html(builder);if(self.opt.custom){container.prepend(customvalue);customvalue.classList.toggle('hidden',!value)}self.move();self.nosearch()})},300,null,val)}}else if(value){value=value.toSearch().split(' ');var arr=container.find('li');for(var i=0;i<arr.length;i++){var el=$(arr[i]);var val=el.attrd('search')||'';if(!val)continue;val=val.toSearch();var is=false;for(var j=0;j<value.length;j++){if(val.indexOf(value[j])===-1){is=true;break}}el.tclass('hidden',is);if(!is)resultscount++}customvalue.classList.toggle('hidden',!value);skipclear=true;self.move();self.nosearch()}};self.show=function(opt){if(opt.checked==true)opt.checked=[];var el=opt.element instanceof jQuery?opt.element[0]:opt.element;if(opt.items==null)opt.items=[];self.tclass(cls+'-default',!opt.render);if(opt.classname){main.aclass(opt.classname);parentclass=opt.classname}if(opt.class){main.aclass(opt.class);parentclass2=opt.class}if(!opt.minwidth)opt.minwidth=config.minwidth;if(is){clearTimeout(timeout);if(self.target===el){self.hide(1);return}}if(opt.template)opt.templatecompiled=Tangular.compile(opt.template);self.initializing=true;self.target=el;opt.ajax=null;self.ajaxold=null;var element=opt.element?$(opt.element):null;var callback=opt.callback,items=opt.items,type=typeof(items);var item;if(type==='string'){items=opt.items=GET(items);type=typeof(items)}if(type==='function'&&callback){type='';opt.ajax=items;items=null}if(!items&&!opt.ajax){self.hide(0);return}self.tclass(cls+'-search-hidden',opt.search===false);self.opt=opt;opt.class&&main.aclass(opt.class);skiphide=true;input.val('');var builder=[],selected=null;opt.ta=opt.key?Tangular.compile((opt.raw?templateraw:template).replace(/\{\{\sname/g,'{{ '+opt.key)):opt.raw?self.templateraw:self.template;if(!opt.ajax){var indexer={},key=(opt.search==true?opt.key:(opt.search||opt.key))||'name';for(var i=0;i<items.length;i++){item=items[i];if(typeof(item)==='string')item={name:item,id:item,selected:item===opt.selected};if(opt.exclude&&opt.exclude(item))continue;if(item.selected||opt.selected===item){selected=i;skipreset=true;item.selected=true}else item.selected=false;if(opt.checked&&item.selected)opt.checked.push(item.id);var c='';if(item.selected)c+=(c?' ':'selected current');if(item.classname)c+=(c?' ':item.classname);if(item.disabled)c+=(c?' ':'ui-disabled');indexer.classes=c;indexer.checkbox=opt.checkbox===true;indexer.index=i;indexer.search=item[key]?item[key].replace(regstrip,''):'';builder.push(opt.ta(item,indexer))}if(opt.empty){item={};var tmp=opt.raw?'<b>{0}</b>'.format(opt.empty):opt.empty;item[opt.key||'name']=tmp;if(!opt.raw)item.template='<b>{0}</b>'.format(opt.empty);indexer.index=-1;builder.unshift(opt.ta(item,indexer))}}self.target=element?element[0]:null;var w=element?element.width():config.minwidth;var offset=element?element.offset():EMPTYOBJECT;var width=w+(opt.offsetWidth||0);if(opt.minwidth&&width<opt.minwidth)width=opt.minwidth;else if(opt.maxwidth&&width>opt.maxwidth)width=opt.maxwidth;ready=false;opt.ajaxold=null;plus.aclass('hidden');self.find('input').prop('placeholder',opt.placeholder||config.placeholder);var scroller=self.find(cls2+'-container').css('width',width+30);if(customvalue.parentNode)customvalue.parentNode.removeChild(customvalue);container.html(builder);if(opt.custom)container.prepend(customvalue);var options={left:0,top:0,width:width},height=opt.height||scroller.height();scroller.css('height',opt.height||'');if(opt.element){switch(opt.align){case'center':options.left=Math.ceil((offset.left-width/2)+(opt.element.innerWidth()/2));break;case'right':options.left=(offset.left-width)+opt.element.innerWidth();break;default:options.left=offset.left;break}options.top=opt.position==='bottom'?((offset.top-height)+element.height()):offset.top}else{options.top=opt.y;options.left=opt.x}options.scope=M.scope?M.scope():'';if(opt.offsetX)options.left+=opt.offsetX;if(opt.offsetY)options.top+=opt.offsetY;var mw=width,mh=scroller.height();if(options.left<0)options.left=10;else if((mw+options.left)>WW)options.left=(WW-mw)-10;mh+=search.height();if($(W).scrollTop()===0){if((mh+options.top)>WH)options.top=(WH-mh)-10}if(options.top<10)options.top=10;main.css(options);!isMOBILE&&setTimeout(function(){if(opt.search!==false)input.focus()},200);setTimeout(function(){self.initializing=false;skiphide=false;is=true;if(selected){var h=container.find('li:first-child').innerHeight()+1;var y=(container.find('li.selected').index()*h)-(h*2);scroller[0].scrollTop=y<0?0:y}else scroller[0].scrollTop=0;ready=true;self.rclass('invisible')},100);if(is){self.search();return}selectedindex=selected||0;resultscount=items?items.length:0;skipclear=true;self.search();self.aclass('invisible');self.rclass('hidden');setTimeout(function(){if(self.opt&&((self.opt.x!=null&&self.opt.y!=null)||(self.target&&self.target.offsetParent)))main.aclass(cls+'-visible');else self.hide(1)},100);skipreset=false};self.hide=function(sleep){if(!is||self.initializing)return;clearTimeout(timeout);timeout=setTimeout(function(){self.rclass(cls+'-visible').aclass('hidden');if(parentclass){main.rclass(parentclass);parentclass=null}if(parentclass2){main.rclass(parentclass2);parentclass2=null}if(self.opt){self.opt.close&&self.opt.close();self.opt=null}is=false},sleep?sleep:100)}});

COMPONENT('errorhandler','keywords:401=login',function(self,config){self.readonly();self.singleton();self.nocompile();self.blind();self.make=function(){var keywords=config.keywords?config.keywords.split(','):EMPTYARRAY;for(var i=0;i<keywords.length;i++)keywords[i]=keywords[i].split('=');self.on('ERROR',function(err){if(err instanceof Error)err=[{error:err.message}];else if(!(err instanceof Array))err=[{error:err.error||err.message||err.err}];var arr=[],response={};for(var m of err){if(!m.error)continue;for(var k of keywords){if((m.name&&m.name.indexOf(k[0])!==-1)||m.error.indexOf(k[0])!==-1)response[k[1]]=true}arr.push(m.error.toString().encode())}response.items=arr;if(config.exec){response.message=arr.join('<br />');self.SEEX(config.exec,response)}else{var name=self.caniuse('message')?'message':self.caniuse('notify')?'notify':self.caniuse('notifybar')?'notifybar':self.caniuse('snackbar')?'snackbar':'';if(name)SETTER(name+'/warning',response.items.join('<br />'));else if(W.console)console.error('ERROR():',response.items.join('<br />'))}SETTER('!loading/hide',100)})}});

COMPONENT('exec',function(self,config){var regparent=/\?\d/,extensions=[],skiptimeout=null;self.readonly();self.blind();self.singleton();self.register=function(fn){extensions.push(fn)};self.make=function(){var fn=function(plus,forceprevent){return function execlick(e){var el=$(this);if(!plus&&skiptimeout)return;if(!e.$force&&!plus&&el.hclass('exec2')){skiptimeout&&clearTimeout(skiptimeout);skiptimeout=setTimeout(function(ctx,e){skiptimeout=null;e.$force=true;execlick.call(ctx,e)},300,this,e);return}var attr=el.attrd('exec'+plus);var href=el.attrd('href'+plus);if(skiptimeout){clearTimeout(skiptimeout);skiptimeout=null}var prevent=forceprevent?'1':el.attrd('prevent'+plus);if(prevent==='true'||prevent==='1'){e.preventDefault();e.stopPropagation()}if(attr){if(extensions.length){for(var ext of extensions){if(ext(attr,el,e,plus))return}}if(M.is20){el.EXEC(attr,el,e)}else{if(attr.includes('?'))attr=el.scope().makepath(attr);EXEC(attr,el,e)}}href&&REDIRECT(href)}};var el=$(document.body);el.on('contextmenu',config.selector3||'.exec3',fn('3',true));el.on('dblclick',config.selector2||'.exec2',fn('2'));el.on('click',config.selector||'.exec',fn(''))}});

COMPONENT('icons','search:Search;scrollbarshadow:0',function(self,config,cls){var cls2='.'+cls,template='<span data-search="{0}"><i class="{1}"></i></span>',events={},container,content,is=false,cachekey;self.singleton();self.readonly();self.blind();self.nocompile();self.redraw=function(){container.html('<div class="{0}"><div class="{0}-header"><div class="{0}-search"><span><i class="ti ti-search clearsearch"></i></span><div><input type="text" placeholder="{1}" class="{0}-search-input"></div></div></div><div class="{0}-scrollbar"><div class="{0}-content"></div></div></div>'.format(cls,config.search));content=container.find(cls2+'-content');self.scrollbar=SCROLLBAR(container.find(cls2+'-scrollbar'),{visibleY:1,shadow:config.scrollbarshadow})};self.rendericons=function(empty){var key=empty?'1':'0';if(cachekey===key)return;cachekey=key;var builder=[];empty&&builder.push(template.format('',''));AJAX('GET '+(config.list||'https://cdn.componentator.com/icons-db.html'),function(response){response=response.split(',');for(var icon of response)builder.push(template.format(icon.toSearch(),'ti ti-'+icon));if(config.custom){AJAX('GET '+config.custom,function(response){response=response.split(',');for(var icon of response)builder.push(template.format(icon.toSearch(),'tic ti-'+icon));container.find(cls2+'-content').html(builder.join(''))})}else container.find(cls2+'-content').html(builder.join(''))})};self.search=function(value){var search=container.find('.clearsearch');search.rclass2('ti-');if(!value.length){search.aclass('ti-search');content.find('.hidden').rclass('hidden');return}value=value.toSearch();search.aclass('ti-times');self.scrollbar.scrollTop(0);var icons=content.find('span');for(var i=0;i<icons.length;i++){var el=$(icons[i]);el.tclass('hidden',el.attrd('search').indexOf(value)===-1)}};self.make=function(){self.aclass(cls+'-area hidden');self.append('<div class="{0}-container"></div>'.format(cls));container=self.find(cls2+'-container');self.event('keydown','input',function(){var t=this;setTimeout2(self.ID,function(){self.search(t.value)},300)});self.element.on('click',function(e){if(e.target===self.dom)self.hide()});self.event('click','.ti-times',function(){self.find('input').val('');self.search('')});self.event('click',cls2+'-content span',function(){self.opt.scope&&M.scope(self.opt.scope);self.opt.callback&&self.opt.callback($(this).find('i').attr('class'));self.hide()});events.click=function(e){var el=e.target,parent=self.dom;do{if(el==parent)return;el=el.parentNode}while(el);self.hide()};self.on('reflow + resize + resize2',self.hide);self.on('scroll',function(e){if(e&&e[0]!==self.scrollbar.area[0])self.hide()});self.redraw()};self.bindevents=function(){if(!events.is){events.is=true;$(document).on('click',events.click)}};self.unbindevents=function(){if(events.is){events.is=false;$(document).off('click',events.click)}};self.show=function(opt){var tmp=opt.element?opt.element instanceof jQuery?opt.element[0]:opt.element.element?opt.element.dom:opt.element:null;if(is&&tmp&&self.target===tmp){self.hide();return}var search=container.find(cls2+'-search-input');search.val('');container.find('.clearsearch').rclass2('ti-').aclass('ti-search');if(M.scope)opt.scope=M.scope();self.target=tmp;self.opt=opt;var css={};if(is){css.left=0;css.top=0;container.css(css)}else self.rclass('hidden');var target=$(opt.element);var w=container.width();var offset=target.offset();if(opt.element){switch(opt.align){case'center':css.left=Math.ceil((offset.left-w/2)+(target.innerWidth()/2));break;case'right':css.left=(offset.left-w)+target.innerWidth();break;default:css.left=offset.left;break}css.top=opt.position==='bottom'?(offset.top-self.element.height()-10):(offset.top+target.innerHeight()+10)}else{css.left=opt.x;css.top=opt.y}if(opt.offsetX)css.left+=opt.offsetX;if(opt.offsetY)css.top+=opt.offsetY;is=true;self.rendericons(opt.empty);if($(W).scrollTop()===0){if(css.top+container.height()>W.innerHeight)css.top=W.innerHeight-container.height()-20}container.css(css);if(opt.scrolltop==null||opt.scrolltop)self.scrollbar.scrollTop(0);search.focus();setTimeout(self.bindevents,50);clearTimeout2(self.ID)};self.clear=function(){content.empty();cachekey=null};self.hide=function(){is=false;self.target=null;self.opt=null;self.unbindevents();self.aclass('hidden');content.find('.hidden').rclass('hidden');setTimeout2(self.ID,self.clear,1000*10)}});

COMPONENT('imageviewer','selector:.img-viewer;container:.img-container;loading:1;unknown:Unknown image',function(self,config,cls){var cls2='.'+cls,isclosed=false,isrendering=false,events={};events.keydown=function(e){switch(e.which){case 38:case 37:self.find('button[name="prev"]').trigger('click');break;case 32:case 39:case 40:self.find('button[name="next"]').trigger('click');break;case 27:self.close();break}};events.bind=function(){if(!events.is){events.is=true;$(W).on('keydown',events.keydown)}};events.unbind=function(){if(events.is){events.is=false;$(W).off('keydown',events.keydown)}};self.readonly();self.blind();self.singleton();self.nocompile&&self.nocompile();self.make=function(){self.aclass(cls+' hidden');self.append('<div class="{0}-header"><button name="close"><i class="ti ti-times"></i></button><div><b></b><div class="help"></div></div></div><div class="{0}-loading hidden"><div></div></div><div class="{0}-buttons"><button name="prev"><i class="ti ti-arrow-left"></i></button><button name="next"><i class="ti ti-arrow-right"></i></button></div><div class="{0}-viewer"><div class="{0}-cell"><img /></div></div>'.format(cls));self.resize();self.on('resize2',self.resize);$(document.body).on('click',config.selector,function(){var el=$(this);isclosed=false;self.show(el)});self.event('click','button[name]',function(){var t=this;if(!t.disabled){if(t.name==='close')self.close();else self.show($(this.$el))}});self.find('img').on('load',function(){isrendering=false;self.loading(false)});self.event('click',cls2+'-buttons',function(e){if(e.target===this)self.close()})};self.close=function(){isclosed=true;isrendering=false;$('html,body').rclass(cls+'-noscroll');self.aclass('hidden');events.unbind()};self.loading=function(is){if(!config.loading)return;var el=self.find(cls2+'-loading');if(is){el.rclass('hidden',is);return}setTimeout(function(){el.aclass('hidden')},500)};self.show=function(el){if(isrendering||el==null||isclosed||WIDTH()==='xs')return;var parent=el.closest(config.container);var arr=parent.find(config.selector).toArray();var index=arr.indexOf(el[0]);var buttons=self.find(cls2+'-buttons').find('button');buttons[0].disabled=index===0;buttons[1].disabled=index>=arr.length-1;if(!buttons[0].disabled)buttons[0].$el=arr[index-1];if(!buttons[1].disabled)buttons[1].$el=arr[index+1];self.loading(true);isrendering=true;var image=new Image();image.src=el.attr('data-src')||el.attr('src');image.onload=function(){var img=this,ratio,w=image.width,h=image.height,tw=WW-80,th=WH-140;if(w>h){ratio=w/h;if(w>tw)w=tw;h=w/ratio>>0;if(h>th){h=th;w=h*ratio>>0}}else{ratio=h/w;if(h>th)h=th;w=h/ratio>>0;if(w>tw){w=tw;h=w*ratio>>0}}if(isclosed)return;events.bind();self.find('img').attr('src',img.src).attr('width',w).attr('height',h);self.find('.help').html(img.width+'x'+img.height+'px');self.find('b').html(el.attr('alt')||el.attr('title')||config.unknown);self.rclass('hidden');$('html,body').aclass(cls+'-noscroll')}};self.resize=function(){var viewer=self.find(cls2+'-viewer');var loading=self.find(cls2+'-loading');var css={};css.height=WH-45;css.width=WW;viewer.css(css);loading.css(css)}});

COMPONENT('input','maxlength:200;innerlabel:0;tabindex:0;dirkey:name;dirvalue:id;increment:1;format:auto;autovalue:name;direxclude:false;checkicon:ti ti-check;forcevalidation:1;searchalign:1;height:80;tabs:1;after:\\:',function(self,config,cls){var cls2='.'+cls,input,placeholder,dirsource,binded,customvalidator,customtransformer,mask,rawvalue,isdirvisible=false,nobindcamouflage=false,focused=false;self.nocompile();self.autobind20&&self.autobind20();self.init=function(){Thelpers.ui_input_icon=function(val){return val.charAt(0)==='!'||val.indexOf(' ')!==-1?('<span class="ui-input-icon-custom">'+(val.charAt(0)==='!'?val.substring(1):('<i class="'+val)+'"></i>')+'</span>'):('<i class="ti ti-'+val+'"></i>')};W.ui_input_template=Tangular.compile(('{{ if label}}<div class="{0}-label">{{ if icon}}<i class="{{ icon}}"></i>{{ fi}}{{ label | raw}}{{ after | raw}}</div>{{ fi}}<div class="{0}-control{{ if licon}} {0}-licon{{ fi}}{{ if ricon || (type === \'number\' && increment) }} {0}-ricon{{ fi}}">{{ if ricon || (type === \'number\' && increment) }}<div class="{0}-icon-right{{ if type === \'number\' && increment && !ricon}} {0}-increment{{ else if riconclick || type === \'date\' || type === \'time\' || (type === \'search\' && searchalign === 1) || type === \'password\' }} {0}-click{{ fi}}">{{ if type === \'number\' && !ricon}}<i class="ti ti-caret-up"></i><i class="ti ti-caret-down"></i>{{ else}}{{ ricon | ui_input_icon}}{{ fi}}</div>{{ fi}}{{ if licon}}<div class="{0}-icon-left{{ if liconclick || (type === \'search\' && searchalign !== 1) }} {0}-click{{ fi}}">{{ licon | ui_input_icon}}</div>{{ fi}}<div class="{0}-input{{ if align === 1 || align === \'center\' }} center{{ else if align === 2 || align === \'right\' }} right{{ fi}}">{{ if placeholder}}<div class="{0}-placeholder">{{ placeholder}}</div>{{ fi}}{{ if dirsource || type === \'icon\' || type === \'emoji\' || type === \'color\' }}<div class="{0}-value" tabindex="{{ tabindex}}"></div>{{ else}}{{ if type === \'multiline\' }}<textarea data-jc-bind="" style="height:{{ height}}px" tabindex="{{ tabindex}}"></textarea>{{ else}}<input type="{{ if type === \'password\' }}password{{ else}}text{{ fi}}" tabindex="{{ tabindex}}" {{ if autofill}} autocomplete="on" name="{{ NAME}}"{{ else}} name="input'+Date.now()+'" autocomplete="new-password" spellcheck="false" role="combobox" aria-expanded="true" aria-invalid="false" aria-autocomplete="list" aria-expanded="true" aria-haspopup="false" autocapitalize="off" autocomplete="off" autocorrect="off"{{ fi}} data-jc-bind=""{{ if maxlength > 0}} maxlength="{{ maxlength}}"{{ fi}}{{ if autofocus}} autofocus{{ fi}} />{{ fi}}{{ fi}}</div></div>{{ if error}}<div class="{0}-error hidden"><i class="ti ti-warning"></i> {{ error}}</div>{{ fi}}').format(cls))};var dirsourceprepare=function(arr){if(!config.dirfilter)return arr;var fn=FN(config.dirfilter);var output=[];for(var m of arr){if(fn(m))output.push(m)}return output};var dirsourceread=function(){var arr=GET(self.makepath(config.dirsource));return dirsourceprepare(arr)};self.make=function(){if(config.innerlabel&&config.after)config.after='';if(!config.label)config.label=self.html();if(isMOBILE&&config.autofocus)config.autofocus=false;if(config.placeholder==0)config.placeholder='0';if(config.autofill){if(typeof(config.autofill)==='string'){config.NAME=config.autofill}else{var path=self.path.toString();var index=path.lastIndexOf('.');config.NAME=index===-1?path:path.substring(index+1)}}self.aclass(cls+' invisible');self.rclass('invisible',100);self.redraw();self.event('input change',function(){if(nobindcamouflage)nobindcamouflage=false;else self.check()});self.event('click',cls2+'-radio',function(){if(config.disabled){$(this).blur();return}self.change(true);var index=this.getAttribute('data-index');var val=dirsource[index];if(val)self.set(self.itransform(val.id),2)});self.event('click',cls2+'-checkbox',function(){if(config.disabled){$(this).blur();return}self.change(true);var val=self.get();if(val===1)val=0;else if(val===0)val=1;else if(val===true)val=false;else val=true;self.set(self.itransform(val),2)});self.event('focus','input,textarea,'+cls2+'-value',function(){if(config.disabled){$(this).blur();return}focused=true;self.camouflage(false);self.aclass(cls+'-focused');config.autocomplete&&self.EXEC(config.autocomplete,self,input.parent());if(config.autosource){var opt={};opt.element=self.element;var source=GET(self.makepath(config.autosource));if(source instanceof Array){opt.search=function(q,next){var arr=[];q=q.toSearch();for(var m of source){var name=((typeof(m)==='string'?m:m[config.autovalue])||'');if(name&&(!q||name.toSearch().includes(q)))arr.push({[config.autovalue]:name})}next(arr)}}else opt.search=source;opt.callback=function(value){var val=typeof(value)==='string'?value:value[config.autovalue];if(config.autoexec){self.EXEC(config.autoexec,value,function(val){self.set(self.itransform(val),2);self.change();self.bindvalue()})}else{self.set(self.itransform(val),2);self.change();self.bindvalue()}};SETTER('autocomplete/show',opt)}else if(config.mask){setTimeout(function(input){input.selectionStart=input.selectionEnd=0},50,this)}else if(config.dirsource&&(config.autofocus!=false&&config.autofocus!=0)){if(!isdirvisible)self.find(cls2+'-control').trigger('click')}else if(config.type==='date'||config.type==='time'){setTimeout(function(){self.element.find(cls2+'-icon-right').trigger('click')},300)}});self.event('paste','input,textarea',function(e){if(config.mask){var val=(e.originalEvent.clipboardData||window.clipboardData).getData('text');self.set(self.itransform(val.replace(/\s|\t/g,'')));e.preventDefault()}self.check()});self.event('keydown','input,textarea',function(e){var t=this,code=e.which;if(t.readOnly||config.readonly||config.disabled){if(e.keyCode!==9){if(config.dirsource){self.find(cls2+'-control').trigger('click');return}e.preventDefault();e.stopPropagation()}return}if(config.tabs&&t.tagName==='TEXTAREA'&&e.keyCode===9){t.setRangeText('\t',t.selectionStart,t.selectionEnd,'end');self.check();e.preventDefault();return}if(!config.disabled&&config.dirsource&&(code===13||code>30)){self.find(cls2+'-control').trigger('click');return}if(config.mask){if(e.metaKey){if(code===8||code===127){e.preventDefault();e.stopPropagation()}return}if(code===32){e.preventDefault();e.stopPropagation();return}var beg=e.target.selectionStart,end=e.target.selectionEnd,val=t.value,c;if(code===8||code===127){if(beg===end){c=config.mask.substring(beg-1,beg);t.value=val.substring(0,beg-1)+c+val.substring(beg);self.curpos(beg-1)}else{for(var i=beg;i<=end;i++){c=config.mask.substring(i-1,i);val=val.substring(0,i-1)+c+val.substring(i)}t.value=val;self.curpos(beg)}e.preventDefault();return}if(code>40){var cur=String.fromCharCode(code);if(mask&&mask[beg]){if(!mask[beg].test(cur)){e.preventDefault();return}}c=config.mask.charCodeAt(beg);if(c!==95){beg++;while(true){c=config.mask.charCodeAt(beg);if(c===95||isNaN(c))break;else beg++}}if(c===95){val=val.substring(0,beg)+cur+val.substring(beg+1);t.value=val;beg++;while(beg<config.mask.length){c=config.mask.charCodeAt(beg);if(c===95)break;else beg++}self.curpos(beg)}else self.curpos(beg+1);e.preventDefault();e.stopPropagation()}}});self.event('blur','input,textarea,'+cls2+'-value',function(){focused=false;self.camouflage(true);self.rclass(cls+'-focused')});self.itransform=function(value){if(customtransformer){return customtransformer(value)}else if(config.transform){var fn=GET(self.makepath(config.transform));if(fn)value=fn.call(self,value,config)}return value};self.event('click',cls2+'-control',function(){if(config.disabled||isdirvisible)return;if(config.type==='icon'){opt={};opt.element=self.element;opt.value=self.get();opt.empty=true;opt.callback=function(val){self.change(true);self.set(self.itransform(val),2);self.check();rawvalue[0].focus()};SETTER((self.caniuse('icons')?'icons':'faicons')+'/show',opt);return}else if(config.type==='color'){opt={};opt.element=self.element;opt.value=self.get();opt.empty=true;opt.callback=function(al){self.change(true);self.set(self.itransform(al),2);self.check();rawvalue[0].focus()};SETTER('colorpicker/show',opt);return}else if(config.type==='emoji'){opt={};opt.element=self.element;opt.value=self.get();opt.empty=true;opt.callback=function(al){self.change(true);self.set(self.itransform(al),2);self.check();rawvalue[0].focus()};SETTER('emoji/show',opt);return}if(!config.dirsource)return;isdirvisible=true;setTimeout(function(){isdirvisible=false},500);var opt={};opt.element=self.find(cls2+'-control');opt.items=dirsource||dirsourceread();opt.offsetY=-1+(config.diroffsety||0);opt.offsetX=0+(config.diroffsetx||0);opt.placeholder=config.dirplaceholder;opt.render=config.dirrender?GET(self.makepath(config.dirrender)):null;opt.custom=!!config.dircustom;opt.offsetWidth=2;opt.minwidth=config.dirminwidth||200;opt.maxwidth=config.dirmaxwidth;opt.key=config.dirkey||config.key;opt.empty=config.dirempty;opt.checkbox=!!config.multiple;var val=self.get();if(config.multiple){for(var i=0;i<opt.items.length;i++){var item=opt.items[i];if(val instanceof Array){item.selectedts=val.indexOf(item[config.dirvalue||config.value]);item.selected=item.selectedts!==-1}else item.selected=false}}else opt.selected=val;if(config.dirraw)opt.raw=true;if(config.dirsearch!=null)opt.search=config.dirsearch;if(dirsource&&config.direxclude==false&&!config.multiple){for(var i=0;i<dirsource.length;i++){var item=dirsource[i];if(item)item.selected=typeof(item)==='object'&&item[config.dirvalue]===val}}else if(config.direxclude)opt.exclude=item=>item?item[config.dirvalue]===val:false;opt.callback=function(item,el,custom){if(item==null||(config.multiple&&!item.length)){rawvalue.html('');self.set(self.itransform(config.multiple?[]:null),2);self.change();self.check();return}if(config.multiple){var arr=[];for(var i=0;i<item.length;i++){var m=item[i];arr.push(m[config.dirvalue||config.value])}self.set(self.itransform(arr),2);self.change(true);return}var val=custom||typeof(item)==='string'?item:item[config.dirvalue||config.value];if(custom&&typeof(config.dircustom)==='string'){var fn=GET(self.makepath(config.dircustom));fn(val,function(val){self.set(self.itransform(val),2);self.change(true);self.bindvalue()})}else if(custom){if(val){val=self.itransform(val);self.set(val,2);self.change(true);if(dirsource)self.bindvalue();else input.val(val)}}else{val=self.itransform(val);self.set(val,2);self.change(true);if(dirsource)self.bindvalue();else input.val(val)}rawvalue[0].focus()};SETTER('directory/show',opt)});self.event('click',cls2+'-placeholder,'+cls2+'-label',function(e){if(!config.disabled){if(config.dirsource){e.preventDefault();e.stopPropagation();self.find(cls2+'-control').trigger('click')}else if(!config.camouflage||$(e.target).hclass(cls+'-placeholder')){if(input.length){input[0].focus()}else rawvalue[0].focus()}}});self.event('click',cls2+'-icon-left,'+cls2+'-icon-right',function(e){if(config.disabled)return;var el=$(this);var left=el.hclass(cls+'-icon-left');var opt;if(config.dirsource&&left&&config.liconclick){e.preventDefault();e.stopPropagation()}if(!left&&!config.riconclick){if(config.type==='date'){opt={};opt.element=self.element;opt.value=self.get();opt.callback=function(val){self.change(true);self.set(self.itransform(val))};SETTER('datepicker/show',opt)}else if(config.type==='time'){opt={};opt.element=self.element;opt.value=self.get();opt.callback=function(val){self.change(true);self.set(self.itransform(val))};SETTER('timepicker/show',opt)}else if(config.type==='search')self.set('');else if(config.type==='password')self.password();else if(config.type==='number'||config.type==='number2'){var tmp=$(e.target);if(tmp.attr('class').indexOf('ti-')!==-1){var n=tmp.hclass('ti-caret-up')?1:-1;self.change(true);var val=self.preparevalue((self.get()||0)+(config.increment*n));self.set(self.itransform(val),2)}}return}if(left&&config.liconclick)self.EXEC(config.liconclick,self,el);else if(config.riconclick)self.EXEC(config.riconclick,self,el);else if(left&&config.type==='search')self.set('')})};self.camouflage=function(is){if(config.camouflage){if(is){var t=input[0],arr=t.value.split('');for(var i=0;i<arr.length;i++)arr[i]=typeof(config.camouflage)==='string'?config.camouflage:'•';nobindcamouflage=true;t.value=arr.join('')}else{nobindcamouflage=true;var val=self.get();input[0].value=val==null?'':val}self.tclass(cls+'-camouflaged',is)}};self.curpos=function(pos){var el=input[0];if(el.createTextRange){var range=el.createTextRange();range.move('character',pos);range.select()}else if(el.selectionStart){el.focus();el.setSelectionRange(pos,pos)}};self.validate=function(value){if((!config.required||config.disabled)&&!self.forcedvalidation())return true;if(config.disabled)return true;if(config.dirsource)return config.multiple?(value?value.length>0:false):(value!=null&&value!=='');if(customvalidator)return customvalidator(value);if(config.type==='date')return value instanceof Date&&!isNaN(value.getTime());if(config.type==='radiobutton')return!!value;if(config.type==='checkbox')return value===true||value===1;if(value==null)value='';else value=value.toString();if(config.mask&&typeof(value)==='string'&&value.indexOf('_')!==-1)return false;if(config.minlength&&value.length<config.minlength)return false;switch(config.type){case'email':return value.isEmail();case'phone':return value.isPhone();case'url':return value.isURL();case'zip':return(/^\d{5}(?:[-\s]\d{4})?$/).test(value);case'currency':case'number':case'number2':if(config.type==='number2'&&(value==null||value==''))return false;value=value.parseFloat();if((config.minvalue!=null&&value<config.minvalue)||(config.maxvalue!=null&&value>config.maxvalue))return false;return config.minvalue==null?value>0:true}return value.length>0};self.offset=function(){var offset=self.element.offset();var control=self.find(cls2+'-control');var width=control.width()+2;return{left:offset.left,top:control.offset().top+control.height(),width:width}};self.password=function(show){var visible=show==null?input.attr('type')==='text':show;input.attr('type',visible?'password':'text');self.find(cls2+'-icon-right').find('i').tclass(config.ricon,visible).tclass('ti-eye-slash',!visible).tclass('ti-eye',visible)};self.preparevalue=function(value){if(config.type==='number'&&(config.type!=='number2'||value)&&(config.minvalue!=null||config.maxvalue!=null)){var tmp=typeof(value)==='string'?+value.replace(',','.'):value;if(isNaN(tmp))tmp=0;if(config.minvalue>tmp)value=config.minvalue;if(config.maxvalue<tmp)value=config.maxvalue}return value};self.getterin=self.getter;self.getter=function(value,realtime,nobind){if(nobindcamouflage)return;if(config.mask&&config.masktidy){var val=[];for(var i=0;i<value.length;i++){if(config.mask.charAt(i)==='_')val.push(value.charAt(i))}value=val.join('')}self.getterin(self.preparevalue(value),realtime,nobind)};self.setterin=self.setter;self.setter=function(value,path,type){if(config.mask){if(value){if(config.masktidy){var index=0,val=[];for(var i=0;i<config.mask.length;i++){var c=config.mask.charAt(i);val.push(c==='_'?(value.charAt(index++)||'_'):c)}value=val.join('')}if(mask){var arr=[];for(var i=0;i<mask.length;i++){var c=value.charAt(i);if(mask[i]&&mask[i].test(c))arr.push(c);else arr.push(config.mask.charAt(i))}value=arr.join('')}}else value=config.mask}self.setterin(value,path,type);self.bindvalue();config.camouflage&&!focused&&setTimeout(self.camouflage,type==='show'?2000:1,true);if(config.type==='password')self.password(true)};self.check=function(){var is=false;if(config.type!=='radiobutton'){if(config.dirsource)is=!!rawvalue.text();else is=input&&input.length?!!input[0].value:!!self.get()}else{var tmp=self.get();is=tmp&&tmp.length>0}if(binded===is)return;binded=is;placeholder&&placeholder.tclass('hidden',is);self.tclass(cls+'-binded',is);if(config.type==='search')self.find(cls2+'-icon-'+(config.searchalign===1?'right':'left')).find('i').tclass(config.searchalign===1?config.ricon:config.licon,!is).tclass('ti-times',is)};self.bindvalue=function(){var value=self.get();if(dirsource&&config.type!=='radiobutton'){var item,text=[];for(var i=0;i<dirsource.length;i++){item=dirsource[i];if(typeof(item)==='string'){if(item===value)break;item=null}else if(config.multiple||config.type==='radiobutton'){var v=item[config.dirvalue||config.value],index=value instanceof Array?value.indexOf(v):-1;if(index!==-1)text.push({index:index,name:item[config.dirkey||config.key]})}else if(item[config.dirvalue||config.value]===value){item=item[config.dirkey||config.key];break}else item=null}if(config.multiple){text.quicksort('index');for(var i=0;i<text.length;i++)text[i]=text[i].name;item=text.join(', ')}else if(value&&item==null&&config.dircustom)item=value;if(config.dirraw)rawvalue.html(item||'');else rawvalue.text(item||'')}else if(config.dirsource&&config.type!=='radiobutton'){if(config.dirdetail){setTimeout2(self.ID+'dirdetail',function(){self.EXEC(config.dirdetail,value,function(val){if(config.dirraw)rawvalue.html(val||'');else rawvalue.text(val||'');self.check()},5)});return}else if(config.dirraw)rawvalue.html(value||'');else rawvalue.text(value||'')}else{switch(config.type){case'radiobutton':var index=dirsource.findIndex('id',value);self.find(cls2+'-radiobuttons').find(cls2+'-radio').each(function(){var el=$(this);el.tclass(cls+'-checked',el.attr('data-index')==index)});break;case'color':rawvalue.css('background-color',value||'');break;case'icon':rawvalue.html('<i class="{0}"></i>'.format(value||''));break;case'emoji':rawvalue.html(value);break;case'checkbox':self.tclass(cls+'-checked',value===true||value===1);break}}self.check()};self.redraw=function(){if(!config.ricon){if(config.dirsource)config.ricon='angle-down';else if(config.type==='date'){config.ricon='calendar';if(!config.align&&!config.innerlabel)config.align=1}else if(config.type==='icon'||config.type==='color'||config.type==='emoji'){config.ricon='angle-down';if(!config.align&&!config.innerlabel)config.align=1}else if(config.type==='time'){config.ricon='clock';if(!config.align&&!config.innerlabel)config.align=1}else if(config.type==='search')if(config.searchalign===1)config.ricon='search';else config.licon='search';else if(config.type==='password')config.ricon='eye';else if(config.type==='number'||config.type==='number2'){if(!config.align&&!config.innerlabel)config.align=1}}self.tclass(cls+'-masked',!!config.mask);self.rclass2(cls+'-type-');if(config.type)self.aclass(cls+'-type-'+config.type);var html,is=false;if(config.type==='checkbox'){html='<div class="{0}-checkbox"><span><i class="{checkicon}"></i></span><label>{label}</label></div>'.format(cls).args(config)}else if(config.type==='radiobutton'){html=('<div class="{0}-radiobutton">'+(config.label?('<label class="{0}-label">'+config.label+':</label>'):'')+'<div class="{0}-radiobuttons"></div></div>').format(cls)}else{is=true;var opt=CLONE(config);if(opt.type==='number2')opt.type='number';html=W.ui_input_template(opt)}self.html(html);if(is){input=self.find('input,textarea');rawvalue=self.find(cls2+'-value');placeholder=self.find(cls2+'-placeholder')}else if(config.type!=='radiobutton')input=rawvalue=placeholder=null};self.radiorender=function(){var builder=[];for(let i=0;i<dirsource.length;i++){let item=dirsource[i];builder.push('<div data-index="{1}" class="{0}-radio"><span><i></i></span>{name}</div>'.format(cls,i).args(item))}self.find(cls2+'-radiobuttons').tclass(cls+'-multiline',!!config.multiline).html(builder.join(''))};self.configure=function(key,value,init){switch(key){case'icon':if(value&&value.indexOf(' ')===-1)config.icon='ti ti-'+value;break;case'dirsource':if(config.dirajax||value.indexOf('/')!==-1){dirsource=null;if(!init)self.bindvalue()}else{if(value.indexOf(',')!==-1){dirsource=dirsourceprepare(self.parsesource(value));if(config.type==='radiobutton')self.radiorender();else if(!init)self.bindvalue()}else{self.datasource(value,function(path,value){dirsource=dirsourceprepare(M.is20?path:value);if(config.type==='radiobutton')self.radiorender();else self.bindvalue()})}}if(config.type!=='radiobutton'){self.tclass(cls+'-dropdown',!!value);input.prop('readonly',!!config.disabled||!!config.dirsource)}break;case'disabled':self.tclass('ui-disabled',!!value);input&&input.prop('readonly',!!value||!!config.dirsource);self.reset();break;case'required':self.tclass(cls+'-required',!!value);self.reset();break;case'type':self.type=value;break;case'validate':customvalidator=value?(/\(|=|>|<|\+|-|\)/).test(value)?(new Function('value','return '+value)):(function(path){path=self.makepath(path);return function(value){return GET(path)(value)}})(value):null;break;case'innerlabel':self.tclass(cls+'-inner',!!value);self.tclass(cls+'-raw',!value);break;case'monospace':self.tclass(cls+'-monospace',!!value);break;case'transform':customtransformer=value&&(/\(|=|>|<|\+|-|value\.|\)/).test(value)?(new Function('value','return '+value)):null;break;case'maskregexp':if(value){mask=value.toLowerCase().split(',');for(var i=0;i<mask.length;i++){var m=mask[i];if(!m||m==='null')mask[i]='';else mask[i]=new RegExp(m)}}else mask=null;break;case'mask':config.mask=value.replace(/#/g,'_');break}};self.formatter(function(path,value){if(value){switch(config.type){case'id':return(value+'').toLowerCase().replace(/[^a-z0-9]/g,'');case'slug':return(value+'').slug();case'lower':return(value+'').toLowerCase();case'upper':return(value+'').toUpperCase();case'phone':return(value+'').replace(/\s/g,'');case'email':return(value+'').toLowerCase();case'date':var format=config.format;if(format==='auto')format='';return value.format(format||DEF.dateformat||'yyyy-MM-dd');case'time':var format=config.format;if(format==='auto')format='';return value.format(format||'HH:mm');case'number':return config.format?(config.format==='auto'?value.format():value.format(config.format)):value;case'number2':return value==null?'':config.format?(config.format==='auto'?value.format():value.format(config.format)):value}}return value});self.parser(function(path,value){if(value){var tmp;switch(config.type){case'date':tmp=self.get();if(tmp)tmp=tmp.format('HH:mm');else tmp='';return value+(tmp?(' '+tmp):'');case'id':return(value+'').toLowerCase().replace(/[^a-z0-9]/g,'');case'slug':return(value+'').slug();case'lower':case'email':value=value.toLowerCase();break;case'upper':value=value.toUpperCase();break;case'phone':value=value.replace(/\s/g,'');break;case'number2':if(value){var type=typeof(value);if(type==='string'&&(/^[\-0-9\.\,]+$/).test(value))value=value.parseFloat();else if(type!=='number')value=null}else value=null;break;case'time':tmp=value.split(':');var dt=self.get();value=dt?new Date(dt.getTime()):new Date();value.setHours((tmp[0]||'0').parseInt());value.setMinutes((tmp[1]||'0').parseInt());value.setSeconds((tmp[2]||'0').parseInt());break}}else{switch(config.type){case'number':value=0;break;case'number2':case'date':value=null;break}}return self.itransform(value?config.spaces===false?value.replace(/\s/g,''):value:value)});self.state=function(type,what){if(type){if(type===1&&what===4){self.rclass(cls+'-ok '+cls+'-invalid');self.$oldstate=null;return}var invalid=config.required?self.isInvalid():self.forcedvalidation()?self.isInvalid():false;if(invalid!==self.$oldstate){self.$oldstate=invalid;self.tclass(cls+'-invalid',!!invalid);self.tclass(cls+'-ok',!invalid);config.error&&self.find(cls2+'-error').tclass('hidden',!invalid)}}};self.forcedvalidation=function(){if(!config.forcevalidation)return false;if(config.type==='number'||config.type==='number2')return false;var val=self.get();var type=typeof(val);if(config.type==='radiobutton')return!!val;if(config.type==='checkbox')return val===true||val===1;if(type==='string'&&val&&(config.minlength!=null||config.maxlength!=null)){if((config.minlength!=null&&val.length<config.minlength)||(config.maxlength!=null&&val.length>config.maxlength))return true;if(!config.type||(config.type==='string'||config.type==='multiline'))return false}return(config.type==='phone'||config.type==='email')&&(val!=null&&(type==='string'&&val.length!==0))}});

COMPONENT('locale',function(self,config){self.singleton();self.readonly();self.nocompile&&self.nocompile();self.use=function(language){if(!language)return;var fdw=0;var nf=1;var tf=24;var df='';switch(language){case'af':nf=2;df='dd/MM/yyyy';tf=24;fdw=0;break;case'sq':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ar':nf=4;df='yyyy/MM/dd';tf=24;fdw=6;break;case'ar-dz':nf=3;df='dd/yyyy/MM';tf=24;fdw=1;break;case'ar-kw':nf=4;df='dd/MM/yyyy';tf=24;fdw=6;break;case'ar-ly':nf=3;df='dd/yyyy/MM';tf=24;fdw=6;break;case'ar-ma':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ar-sa':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'ar-tn':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'hy-am':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'az':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'bm':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'be':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'bn':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'bn-bd':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'bs':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'br':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'bg':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'my':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'km':nf=3;df='dd/MM/yyyy';tf=24;fdw=0;break;case'ca':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'tzm':nf=3;df='dd/MM/yyyy';tf=24;fdw=6;break;case'tzm-latn':nf=3;df='dd/MM/yyyy';tf=24;fdw=6;break;case'zh-cn':nf=4;df='yyyy/MM/dd';tf=24;fdw=0;break;case'zh-hk':nf=4;df='yyyy/MM/dd';tf=24;fdw=0;break;case'zh-mo':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'zh-tw':nf=4;df='yyyy/MM/dd';tf=24;fdw=0;break;case'cv':nf=2;df='dd-MM-yyyy';tf=24;fdw=1;break;case'hr':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'cs':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'da':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'nl':nf=3;df='dd-MM-yyyy';tf=24;fdw=1;break;case'nl-be':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'en-au':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'en-ca':nf=4;df='yyyy-MM-dd';tf=12;fdw=0;break;case'en-in':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'en-ie':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'en-il':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'en-nz':nf=4;df='dd/MM/yyyy';tf=12;fdw=1;break;case'en-sg':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'en-gb':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'en':nf=4;df='MM/dd/yyyy';tf=12;fdw=0;break;case'us':nf=4;df='MM-dd-yyyy';tf=12;fdw=0;language='en';break;case'eo':nf=2;df='yyyy-MM-dd';tf=24;fdw=1;break;case'et':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'fo':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'fil':nf=4;df='MM/dd/yyyy';tf=24;fdw=0;break;case'fi':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'fr':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'fr-ca':nf=4;df='yyyy-MM-dd';tf=24;fdw=0;break;case'fr-ch':nf=1;df='dd.MM.yyyy';tf=24;fdw=1;break;case'fy':nf=3;df='dd-MM-yyyy';tf=24;fdw=1;break;case'gl':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ka':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'de':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'de-at':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'de-ch':nf=1;df='dd.MM.yyyy';tf=24;fdw=1;break;case'el':nf=3;df='dd/MM/yyyy';tf=12;fdw=1;break;case'gu':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'he':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'hi':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'hu':nf=2;df='yyyy.MM.dd';tf=24;fdw=1;break;case'is':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'id':nf=3;df='dd/MM/yyyy';tf=24;fdw=0;break;case'ga':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'it':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'it-ch':nf=1;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ja':nf=4;df='yyyy/MM/dd';tf=24;fdw=0;break;case'jv':nf=3;df='dd/MM/yyyy';tf=24;fdw=0;break;case'kn':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'kk':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'tlh':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'gom-deva':nf=4;df='dd-MM-yyyy';tf=12;fdw=0;break;case'gom-latn':nf=4;df='dd-MM-yyyy';tf=12;fdw=0;break;case'ko':nf=4;df='yyyy.MM.dd';tf=12;fdw=0;break;case'ku':nf=4;df='dd/MM/yyyy';tf=24;fdw=6;break;case'ky':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'lo':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'lv':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'lt':nf=2;df='yyyy-MM-dd';tf=24;fdw=1;break;case'lb':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'mk':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ms-my':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ms':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ml':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'dv':nf=4;df='dd/MM/yyyy';tf=24;fdw=5;break;case'mt':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'mi':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'mr':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'mn':nf=4;df='yyyy-MM-dd';tf=24;fdw=1;break;case'me':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ne':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'se':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'nb':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'nn':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'oc-lnc':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'fa':nf=4;df='dd/MM/yyyy';tf=24;fdw=6;break;case'pl':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'pt':nf=2;df='dd/MM/yyyy';tf=24;fdw=0;break;case'pt-br':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'x-pseudo':nf=2;df='dd/MM/yyyy';tf=12;fdw=1;break;case'pa-in':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'ro':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ru':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'gd':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'sr':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'sr-cyrl':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'sd':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'si':nf=4;df='yyyy/MM/dd';tf=12;fdw=1;break;case'sk':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'eu':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;language='en';break;case'sl':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'es':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'es-do':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'es-mx':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'es-us':nf=4;df='MM/dd/yyyy';tf=12;fdw=0;break;case'sw':nf=4;df='dd.MM.yyyy';tf=24;fdw=1;break;case'sv':nf=2;df='yyyy-MM-dd';tf=24;fdw=1;break;case'tl-ph':nf=4;df='MM/dd/yyyy';tf=24;fdw=0;break;case'tg':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'tzl':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ta':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'te':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'tet':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'th':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'bo':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'tr':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'tk':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'uk':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ur':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'ug-cn':nf=4;df='yyyy-MM-dd';tf=24;fdw=0;break;case'uz':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'uz-latn':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'vi':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'cy':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'yo':nf=4;df='dd/MM/yyyy';tf=12;fdw=1;break;case'ss':nf=4;df='dd/MM/yyyy';tf=12;fdw=1;break}if(!df)return false;if(config.requests)DEF.languagehtml=language;DEF.dateformat=df;DEF.timeformat=tf===12?'!HH:mm a':'HH:mm';DEF.firstdayofweek=fdw;DEF.decimalseparator=nf===2||nf===3?',':'.';DEF.thousandsseparator=nf===4?',':nf===3?'.':' ';ENV('ts',(tf===12?'!':'')+df+' - '+(tf===12?DEF.timeformat.substring(1):DEF.timeformat));ENV('date',DEF.dateformat);ENV('time',DEF.timeformat);CONFIG('datepicker,firstday','firstday:'+fdw);CONFIG('timepicker','ampm:'+tf===12?'true':'false');self.path&&self.set({df:df,tf:tf,fdw:fdw,nf:nf});return true};self.make=function(){if(config.language){self.use(config.language)}else{var language=navigator.language.toLowerCase();if(!self.use(language))self.use(language.split('-')[0])}}});

COMPONENT('menu','style:2',function(self,config,cls){self.singleton();self.readonly();self.nocompile&&self.nocompile();var cls2='.'+cls,is=false,issubmenu=false,events={},ul,children,prevsub,parentclass,container;self.make=function(){self.aclass('hidden '+cls+'-area');self.append('<div class="{0} {0}-style-{1}"><div class="{0}-items"><ul></ul></div><div class="{0}-submenu hidden"><ul></ul></div>'.format(cls,config.style));container=self.find('> '+cls2);ul=self.find(cls2+'-items').find('ul');children=self.find(cls2+'-submenu');self.element.on('click',function(e){if(e.target===self.dom)self.hide()});self.event('click','li',function(e){var el=$(this);if(!el.hclass(cls+'-divider')&&!el.hclass(cls+'-disabled')){self.opt.scope&&M.scope(self.opt.scope);var index=el.attrd('index').split('-');if(index.length>1){self.opt.callback(self.opt.items[+index[0]].children[+index[1]]);self.hide()}else if(!issubmenu){self.opt.callback(self.opt.items[+index[0]]);self.hide()}}e.preventDefault();e.stopPropagation()});self.event('contextmenu',function(e){e.preventDefault();e.stopPropagation();self.hide()});events.hide=function(){is&&self.hide()};self.event('scroll',events.hide);self.on('reflow + scroll + resize + resize2',events.hide);events.hidechildren=function(){if($(this.parentNode.parentNode).hclass(cls+'-items')){if(prevsub&&prevsub[0]!==this){prevsub.rclass(cls+'-selected');prevsub=null;children.aclass('hidden');issubmenu=false}}};events.children=function(){if(prevsub&&prevsub[0]!==this){prevsub.rclass(cls+'-selected');prevsub=null}issubmenu=true;var el=prevsub=$(this);var index=+el.attrd('index');var item=self.opt.items[index];el.aclass(cls+'-selected');var html=self.makehtml(item.children,index);children.find('ul').html(html);children.rclass('hidden');var css={},offset=el.position();css.left=ul.width()-5;css.top=offset.top-5;var offsetX=offset.left;offset=self.element.offset();var w=children.width();var left=offset.left+css.left+w;if(left>(WW+30))css.left=(offsetX-w)+5;children.css(css);var leftoffset=children.offset().left;var childrenwidth=children.width();var suboffset=childrenwidth+leftoffset;if(suboffset>WW)children.css('left',-childrenwidth)}};self.bindevents=function(){events.is=true;$(document).on('touchstart mouseenter mousedown',cls2+'-children',events.children);$(W).on('scroll',events.hide);self.element.on('mouseenter','li',events.hidechildren)};self.unbindevents=function(){events.is=false;$(document).off('touchstart mouseenter mousedown',cls2+'-children',events.children);$(W).off('scroll',events.hide);self.element.off('mouseenter','li',events.hidechildren)};self.showxy=function(x,y,items,callback){var opt={};opt.x=x;opt.y=y;opt.items=items;opt.callback=callback;self.show(opt)};self.makehtml=function(items,index){var builder=[],tmp;for(var i=0;i<items.length;i++){var item=items[i];if(typeof(item)==='string'){if(item==='-')tmp='<hr />';else tmp='<span>{0}</span>'.format(item);builder.push('<li class="{0}-divider">{1}</li>'.format(cls,tmp));continue}var cn=item.classname||item.class||'',icon='',color=item.color?'style="color:{color}"'.args(item):'';if(item.icon)icon='<i class="{0}" {1}></i>'.format(item.icon.charAt(0)==='!'?item.icon.substring(1):item.icon.indexOf(' ')===-1?('ti ti-'+item.icon):item.icon,color);else cn=(cn?(cn+' '):'')+cls+'-nofa';tmp='';if(index==null&&item.children&&item.children.length){cn+=(cn?' ':'')+cls+'-children';tmp+='<i class="ti ti-angle-right pull-right"></i>'}if(item.selected)cn+=(cn?' ':'')+cls+'-selected';if(item.disabled)cn+=(cn?' ':'')+cls+'-disabled';tmp+='<div class="{0}-name">{1}{2}{3}</div>'.format(cls,icon,item.name,item.shortcut?'<b>{0}</b>'.format(item.shortcut):'');if(item.note)tmp+='<div class="ui-menu-note">{0}</div>'.format(item.note);builder.push('<li class="{0}" data-index="{2}">{1}</li>'.format(cn,tmp,(index!=null?(index+'-'):'')+i))}return builder.join('')};self.show=function(opt){if(typeof(opt)==='string'){opt={align:opt};opt.element=arguments[1];opt.items=arguments[2];opt.callback=arguments[3];opt.offsetX=arguments[4];opt.offsetY=arguments[5]}var tmp=opt.element?opt.element instanceof jQuery?opt.element[0]:opt.element.element?opt.element.dom:opt.element:null;if(is&&tmp&&self.target===tmp){self.hide();return}var target=opt.element?$(opt.element):null;if(target&&HIDDEN(target))return;self.target=tmp;self.opt=opt;opt.scope=M.scope();var c=opt.classname||opt.class;if(parentclass&&c!==parentclass){self.rclass(parentclass);parentclass=null}self.tclass('ui-large',opt.large==true);if(!opt.nomobile)self.find('{0}'.format(cls2)).aclass('{0}-mobile'.format(cls));issubmenu=false;prevsub=null;var css={};children.aclass('hidden');children.find('ul').empty();ul.html(self.makehtml(opt.items));if(!parentclass&&c){self.aclass(c);parentclass=c}if(is){css.left=0;css.top=0;container.css(css)}else{self.rclass('hidden');self.aclass(cls+'-visible',100);is=true;if(!events.is)self.bindevents()}var plusW=opt.offsetWidth||0;if(opt.fixedwidth){var tmpw=target.width()+plusW;container.css({'max-width':tmpw,width:tmpw});plusW=0}else container.css({'max-width':'',width:''});var w=container.width();if(opt.element){var offset=target.offset();switch(opt.align){case'center':css.left=Math.ceil((offset.left-w/2)+(target.innerWidth()/2));break;case'right':css.left=(offset.left-w)+target.innerWidth();break;default:css.left=offset.left;break}css.top=opt.position==='bottom'?(offset.top-container.height()-10):(offset.top+target.innerHeight()+10)}else{css.left=opt.x;css.top=opt.y}if(opt.position==='bottom')css.top+=10;else css.top-=10;if(opt.offsetX)css.left+=opt.offsetX;if(opt.offsetY)css.top+=opt.offsetY;var mw=w,mh=container.height();if(css.left<0)css.left=10;else if((mw+css.left)>WW)css.left=(WW-mw)-10;if(css.top<0)css.top=10;else if((mh+css.top)>WH)css.top=(WH-mh)-10;container.css(css)};self.hide=function(){events.is&&self.unbindevents();is=false;self.opt&&self.opt.hide&&self.opt.hide();self.target=null;self.opt=null;self.aclass('hidden');self.rclass(cls+'-visible')}});

COMPONENT('message','button:OK;style:2',function(self,config,cls){var cls2='.'+cls,is,events={};self.readonly();self.singleton();self.nocompile&&self.nocompile();self.make=function(){var pls=(config.style===2?(' '+cls+'2'):'');self.aclass(cls+' hidden'+pls);if(config.closeoutside)self.event('click',function(e){var node=e.target,skip={SPAN:1,A:1,I:1};if(!skip[node.tagName])self.hide()});else self.event('click','button',self.hide)};events.keyup=function(e){if(e.which===27)self.hide()};events.bind=function(){if(!events.is){$(W).on('keyup',events.keyup);events.is=false}};events.unbind=function(){if(events.is){events.is=false;$(W).off('keyup',events.keyup)}};self.warning=function(message,icon,fn){if(typeof(icon)==='function'){fn=icon;icon=null}if(icon&&typeof(icon)!=='string')icon=null;if(message instanceof Array){var builder=[];for(var i=0;i<message.length;i++){var err=message[i].error;err&&builder.push(err)}message=builder.join('<br />')}self.callback=fn;self.content(cls+'-warning',message,icon||'warning')};self.info=function(message,icon,fn){if(typeof(icon)==='function'){fn=icon;icon=null}if(icon&&typeof(icon)!=='string')icon=null;if(message instanceof Array){var builder=[];for(var i=0;i<message.length;i++){var err=message[i].error;err&&builder.push(err)}message=builder.join('<br />')}self.callback=fn;self.content(cls+'-info',message,icon||'info-circle')};self.success=function(message,icon,fn){if(typeof(icon)==='function'){fn=icon;icon=null}if(icon&&typeof(icon)!=='string')icon=null;self.callback=fn;self.content(cls+'-success',message,icon||'check-circle')};self.response=function(message,callback,response){var fn;if(typeof(message)==='function'){response=callback;fn=message;message=null}else if(typeof(callback)==='function')fn=callback;else{response=callback;fn=null}if(response instanceof Array){var builder=[];for(var i=0;i<response.length;i++){var err=response[i].error;err&&builder.push(err)}self.warning(builder.join('<br />'));SETTER('!loading/hide')}else if(typeof(response)==='string'){self.warning(response);SETTER('!loading/hide')}else{if(message){if(message.length<40&&message.charAt(0)==='?')SET(message,response);else self.success(message)}if(typeof(fn)==='string')SET(fn,response);else if(fn)fn(response)}};self.hide=function(){events.unbind();self.callback&&self.callback();self.aclass('hidden')};self.content=function(classname,text,icon){if(icon.indexOf(' ')===-1)icon='ti ti-'+icon;!is&&self.html('<div><div class="{0}-icon"><i class="{1}"></i></div><div class="{0}-body"><div class="{0}-text"></div><hr /><button>{2}</button></div></div>'.format(cls,icon,config.button));self.rclass2(cls+'-').aclass(classname);self.find(cls2+'-body').rclass().aclass(cls+'-body');is&&self.find(cls2+'-icon').find('.ti').rclass2('ti').aclass(icon);self.find(cls2+'-text').html(text);self.rclass('hidden');self.element.focus();is=true;events.bind();document.activeElement&&document.activeElement.blur();setTimeout(function(){self.aclass(cls+'-visible');setTimeout(function(){self.find(cls2+'-icon').aclass(cls+'-icon-animate');document.activeElement&&document.activeElement.blur()},300)},100)}});

COMPONENT('mobilecarousel','count:1;selector:.col-sm-4;margin:15;snapping:true;animate:5000',function(self,config,cls){var cls2='.'+cls,width=0,count=0,index=0,increment=1,skip=false,move=false,anim,container,old;self.readonly();self.blind();self.make=function(){self.element.wrapInner('<div class="{0}-container"><div class="{0}-body"></div></div>'.format(cls));self.on('resize2',self.resize);setTimeout(self.resize,50);setTimeout(self.resize,500);setTimeout(self.resize,2000);CSS('.{3} .{3}-{0} {1}{margin:0 0 0 {2}px;padding:0;float:left;vertical-align:top;display:inline-block}.{3} .{3}-{0} {1}:first-child{margin-left:0}'.format(self.id,config.selector,config.margin,cls));container=self.find(cls2+'-container').aclass(cls+'-'+self.id);config.snapping&&container.on('scroll',function(){!skip&&setTimeout2(self.id,self.snap,200)}).on('touchmove',function(){clearTimeout(anim)});config.animate&&(anim=setTimeout(self.animate,config.animate))};self.animate=function(){if(!count||move)return;index+=increment;if(index===count-1)increment=-1;else if(index===0)increment=1;skip=true;anim=true;container.animate({scrollLeft:index*(width+config.margin)},200);setTimeout(function(){skip=false;anim=false},400);anim=setTimeout(self.animate,2000)};self.snap=function(){var x=container[0].scrollLeft,off=Math.round(x/width);skip=true;move=true;container.stop().animate({scrollLeft:off*(width+config.margin)},200);setTimeout(function(){skip=false},500)};self.resize=function(){if(WIDTH()!=='xs'){if(old==='1')return;old='1';count=0;width=0;self.rclass(cls);self.css('height','');self.find(cls2+'-body').css('width','');self.find(config.selector).css('width','');return}self.aclass(cls);self.width(function(w){var sum=0,height=0;width=w/config.count;count=0;self.find(config.selector).each(function(index){var el=$(this);sum+=width+(index?15:0);height=Math.max(el.innerHeight(),height);el.css('width',width);count++});var k=sum+'x'+height;if(old===k)return;old=k;self.css('height',(height>>0)+15);self.find(cls2+'-body').css('width',sum)})}});

COMPONENT('uibuilder','css:1',function(self,config,cls){self.make=function(){self.aclass(cls);var scr=self.find('scr'+'ipt');if(scr.length>0){var meta=PARSE(scr.html());self.empty();self.load(meta)}};self.done=function(){config.url&&AJAX('GET '+config.url,self.load)};self.load=function(data){if(!data||data instanceof Array||typeof(data)!=='object')return;if(self.app){self.app.remove();self.app=null;config.app&&self.SEEX(config.app,null)}data.id=config.id||self.ID;UIBuilder.build(self.element,data,function(response){if(!config.css)response.css='';response.component=self;response.schema=data;self.app=response;config.app&&self.SEEX(config.app,response,data);config.output&&self.app.on('output',function(meta){self.SEEX(config.output,meta)})})};self.setter=function(value){if(value){if(typeof(value)==='string')AJAX('GET '+value,self.load);else self.load(value)}else if(self.app){self.app.remove();self.app=null;config.app&&self.SEEX(config.app,null)}}},['<UIBuilder> https://cdn.componentator.com/uibuilder.min@1.js']);

COMPONENT('uistudio','css:1;loading:1;inputdelay:20;title:false;flowoutput:1',function(self,config,cls){self.readonly();var cachecurrent=null,current={},parents=[],endpoint;current.origin=config.origin||location.origin;current.query=NAV.query;current.ssid=config.ssid||NAV.query.ssid;var navigate=function(){config.loading&&SETTER('loading/show');var url=endpoint;if(url.charAt(0)==='/')url=(config.origin||location.origin)+url;if(current.ssid)url=QUERIFY(url,{ssid:current.ssid});config.onrequest&&self.EXEC(config.onrequest,current);AJAX('POST {0} ERROR'.format(url),current,function(response){if(!response.id){if(cachecurrent){current=cachecurrent;cachecurrent=null}config.loading&&SETTER('loading/hide',500);return}cachecurrent=CLONE(current);if(response.exec){config.loading&&SETTER('loading/hide',500);var tmp={};tmp.id=response.id;tmp.app=self.app;tmp.data=response.data;tmp.parent=response.parent;tmp.query=response.query;tmp.element=self.element;tmp.output=function(id,data){current.id=tmp.id;current.output=id;current.data=data==undefined?tmp.data:data;navigate()};new Function('instance',response.exec)(tmp);return}var issame=current.id===response.id,breadcrumb=null;response.iscurrent=issame;config.onmeta&&self.SEEX(config.onmeta,response);if(response.url){if(response.url.charAt(0)==='/'){if(config.origin){response.url=config.origin+response.url}else{var origin=url.substring(0,url.indexOf('/',9));if(origin.charAt(0)!=='/'&&location.origin.indexOf(origin)===-1)response.url=origin+response.url}}if(issame){if(response.input)setTimeout(response=>self.app.input(response.input,response.data),config.inputdelay,response);SETTER('loading/hide',500);return}else{breadcrumb=CLONE(current);breadcrumb.navigate=function(){current=this;navigate()};parents.push(breadcrumb)}current.id=response.id;current.data=response.data;if(self.app){self.app.remove();self.app=null}AJAX('GET {url} ERROR'.args(response),function(data){if(!config.css)data.css='';data.id=response.id;data.query=data.query||current.query||{};data.ssid=data.query.ssid||current.ssid;data.openplatform=data.query.openplatform;if(breadcrumb)breadcrumb.name=data.name;UIBuilder.build(self.element,data,function(app){config.loading&&SETTER('loading/hide',500);app.breadcrumb=parents;self.app=app;self.app.component=self;if(config.title)document.title=data.name+(config.plus?(' - '+config.plus):'');if(response.input)setTimeout(response=>self.app.input(response.input,response.data),config.inputdelay,response);self.app.on('output',function(meta){if(config.flowoutput&&meta.componentid!=='flowoutput')return;setTimeout(function(meta){if(!meta.processed){current.output=meta.id;current.data=meta.data;navigate()}},10,meta)});config.onapp&&self.EXEC(config.onapp,app)})})}else{if(config.loading)SETTER('loading/hide',500)}})};self.make=function(){self.aclass(cls);endpoint=config.url;endpoint&&navigate()};self.destroy=function(){if(self.app){self.app.remove();self.app=null}};self.setter=function(value){if(value){current={};current.origin=config.origin||location.origin;current.query=NAV.query;current.ssid=config.ssid||NAV.query.ssid;parents=[];endpoint=value;navigate()}}},['<UIBuilder> https://cdn.componentator.com/uibuilder.min@1.js']);